<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Hexo</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2020-05-06T03:05:06.441Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>xmzhou</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Linux生产最佳实践</title>
    <link href="http://yoursite.com/2020/05/06/Linux%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86/"/>
    <id>http://yoursite.com/2020/05/06/Linux%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86/</id>
    <published>2020-05-06T03:01:27.068Z</published>
    <updated>2020-05-06T03:05:06.441Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# </span><br><span class="line"><span class="meta">#</span><span class="bash"> root 默认管理员 拥有最大权限</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ~ 当前改用户的家目录  root用户的家目录为:/root</span></span><br></pre></td></tr></table></figure><h2 id="pwd-查看当前光标所在的目录-路径"><a href="#pwd-查看当前光标所在的目录-路径" class="headerlink" title="pwd:查看当前光标所在的目录 路径"></a>pwd:查看当前光标所在的目录 路径</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# pwd</span><br><span class="line">/root</span><br><span class="line">[root@localhost ~]#</span><br></pre></td></tr></table></figure><h2 id="ls-查看-显示文件夹-文件名称"><a href="#ls-查看-显示文件夹-文件名称" class="headerlink" title="ls:查看 显示文件夹 文件名称"></a>ls:查看 显示文件夹 文件名称</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# ls</span><br><span class="line">anaconda-ks.cfg</span><br><span class="line">[root@localhost ~]# </span><br><span class="line"><span class="meta">#</span><span class="bash">ls -l 显示详细信息 权限、用户、用户组、时间、大小</span></span><br><span class="line"><span class="meta">#</span><span class="bash">ls -l -a 显示详细信息 包括隐藏文件</span></span><br><span class="line">[root@localhost ~]# ls -l -a</span><br><span class="line">总用量 24</span><br><span class="line">dr-xr-x---.  2 root root  114 5月   1 2020 .</span><br><span class="line">dr-xr-xr-x. 17 root root  224 5月   1 2020 ..</span><br><span class="line">-rw-------.  1 root root 1257 5月   1 2020 anaconda-ks.cfg</span><br><span class="line">-rw-r--r--.  1 root root   18 12月 29 2013 .bash_logout</span><br><span class="line">-rw-r--r--.  1 root root  176 12月 29 2013 .bash_profile</span><br><span class="line">-rw-r--r--.  1 root root  176 12月 29 2013 .bashrc</span><br><span class="line">-rw-r--r--.  1 root root  100 12月 29 2013 .cshrc</span><br><span class="line">-rw-r--r--.  1 root root  129 12月 29 2013 .tcshrc</span><br><span class="line"><span class="meta">#</span><span class="bash"> 注意：隐藏文件是以.开头的</span></span><br><span class="line"><span class="meta">#</span><span class="bash">ls -l -h :显示详细信息，同时显示文件大小 但也仅仅是显示文件的大小 文件夹的大小显示不准确</span></span><br><span class="line">[root@localhost ~]# ls -l -h</span><br><span class="line">总用量 4.0K</span><br><span class="line">-rw-------. 1 root root 1.3K 5月   1 2020 anaconda-ks.cfg</span><br><span class="line"><span class="meta">#</span><span class="bash">ls -l -r -t 按照时间排序 </span></span><br><span class="line"><span class="meta">#</span><span class="bash">场景：快速找到哪些文件更新了</span></span><br><span class="line">[root@localhost /]# ls -l -r -t</span><br><span class="line">总用量 16</span><br><span class="line">drwxr-xr-x.   2 root root    6 4月  11 2018 srv</span><br><span class="line">drwxr-xr-x.   2 root root    6 4月  11 2018 opt</span><br><span class="line">drwxr-xr-x.   2 root root    6 4月  11 2018 mnt</span><br><span class="line">drwxr-xr-x.   2 root root    6 4月  11 2018 media</span><br><span class="line">drwxr-xr-x.   2 root root    6 4月  11 2018 home</span><br><span class="line">drwxr-xr-x.  75 root root 8192 4月  30 17:50 etc</span><br><span class="line">drwxr-xr-x.  25 root root  740 4月  30 17:50 run</span><br><span class="line">lrwxrwxrwx.   1 root root    7 5月   1 2020 bin -&gt; usr/bin</span><br><span class="line">lrwxrwxrwx.   1 root root    9 5月   1 2020 lib64 -&gt; usr/lib64</span><br><span class="line">lrwxrwxrwx.   1 root root    7 5月   1 2020 lib -&gt; usr/lib</span><br><span class="line">lrwxrwxrwx.   1 root root    8 5月   1 2020 sbin -&gt; usr/sbin</span><br><span class="line">drwxr-xr-x.  13 root root  155 5月   1 2020 usr</span><br><span class="line">dr-xr-xr-x.   5 root root 4096 5月   1 2020 boot</span><br><span class="line">dr-xr-x---.   2 root root  114 5月   1 2020 root</span><br><span class="line">dr-xr-xr-x. 111 root root    0 5月   1 2020 proc</span><br><span class="line">dr-xr-xr-x.  13 root root    0 5月   1 2020 sys</span><br><span class="line">drwxr-xr-x.  19 root root  267 5月   1 2020 var</span><br><span class="line">drwxr-xr-x.  20 root root 3220 5月   1 2020 dev</span><br><span class="line">drwxrwxrwt.   9 root root  246 5月   1 2020 tmp</span><br></pre></td></tr></table></figure><h2 id="mkdir-创建文件夹"><a href="#mkdir-创建文件夹" class="headerlink" title="mkdir:创建文件夹"></a>mkdir:创建文件夹</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# mkdir test</span><br><span class="line">[root@localhost ~]# ls</span><br><span class="line">anaconda-ks.cfg  test</span><br><span class="line">[root@localhost ~]# </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">创建同级多个目录</span></span><br><span class="line">[root@localhost ~]# mkdir one two three</span><br><span class="line">[root@localhost ~]# ls</span><br><span class="line">anaconda-ks.cfg  one  test  three  two</span><br><span class="line">[root@localhost ~]#</span><br><span class="line"><span class="meta">#</span><span class="bash">级联创建目录</span></span><br><span class="line">[root@localhost ~]# mkdir -p aa/bb/cc</span><br><span class="line">[root@localhost ~]# ls</span><br><span class="line">aa  anaconda-ks.cfg  one  test  three  two</span><br></pre></td></tr></table></figure><h2 id="cd-切换目录"><a href="#cd-切换目录" class="headerlink" title="cd:切换目录"></a>cd:切换目录</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# cd one/</span><br><span class="line">[root@localhost one]#</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="built_in">cd</span> .. 退到上一层目录</span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="built_in">cd</span> ../.. 退两层目录</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">root用户 家目录为 /root</span></span><br><span class="line"><span class="meta">#</span><span class="bash">普通用户  家目录  /home/xx</span></span><br><span class="line"><span class="meta">#</span><span class="bash">家目录 使用 ~ 表示</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">切换到家目录</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">cd</span> /root</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">cd</span> 直接回车</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">cd</span> ~</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="built_in">cd</span> - 回退到上一次的目录</span></span><br><span class="line">[root@localhost ~]# pwd</span><br><span class="line">/root</span><br><span class="line">[root@localhost ~]# cd aa/bb/cc/</span><br><span class="line">[root@localhost cc]# cd -</span><br><span class="line">/root</span><br><span class="line">[root@localhost ~]#</span><br></pre></td></tr></table></figure><h2 id="mv-amp-cp-移动-复制"><a href="#mv-amp-cp-移动-复制" class="headerlink" title="mv &amp; cp:移动 复制"></a>mv &amp; cp:移动 复制</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">mv 始终是一份 快</span></span><br><span class="line"><span class="meta">#</span><span class="bash">cp是两份 慢</span></span><br><span class="line">[root@localhost ~]# mv ss test/ss</span><br><span class="line">[root@localhost test]# ll</span><br><span class="line">总用量 0</span><br><span class="line">drwxr-xr-x. 2 root root 6 4月  30 18:44 ss</span><br><span class="line">[root@localhost test]#</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">cp -r </span></span><br><span class="line">[root@localhost ~]# cp -r aa/ test/</span><br><span class="line">[root@localhost ~]# ll</span><br><span class="line">总用量 4</span><br><span class="line">drwxr-xr-x. 3 root root   16 4月  30 18:44 aa</span><br><span class="line">-rw-------. 1 root root 1257 5月   1 2020 anaconda-ks.cfg</span><br><span class="line">drwxr-xr-x. 4 root root   26 4月  30 18:56 test</span><br><span class="line">drwxr-xr-x. 2 root root    6 4月  30 18:44 three</span><br><span class="line">drwxr-xr-x. 2 root root    6 4月  30 18:44 two</span><br><span class="line">[root@localhost ~]# cd test/</span><br><span class="line">[root@localhost test]# ll</span><br><span class="line">总用量 0</span><br><span class="line">drwxr-xr-x. 3 root root 16 4月  30 18:56 aa</span><br><span class="line">drwxr-xr-x. 2 root root  6 4月  30 18:44 ss</span><br><span class="line">[root@localhost test]#</span><br></pre></td></tr></table></figure><h2 id="touch-amp-vi-创建文件"><a href="#touch-amp-vi-创建文件" class="headerlink" title="touch &amp; vi :创建文件"></a>touch &amp; vi :创建文件</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">touch x.log 创建空文件</span></span><br><span class="line"><span class="meta">#</span><span class="bash">vi y.log</span></span><br><span class="line"><span class="meta">#</span><span class="bash">默认命令行模式</span></span><br><span class="line"><span class="meta">#</span><span class="bash">i键 进入编辑模式</span></span><br><span class="line"><span class="meta">#</span><span class="bash">esc键 从编辑模式 -&gt; 命令行模式</span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="built_in">shift</span>+:键 从命令行模式 -&gt; 尾行模式，输入wq保存退出</span></span><br></pre></td></tr></table></figure><h2 id="gt-amp-gt-gt-创建-追加"><a href="#gt-amp-gt-gt-创建-追加" class="headerlink" title="&gt; &amp; &gt;&gt;:创建 追加"></a><code>&gt;</code> &amp; <code>&gt;&gt;</code>:创建 追加</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">主要场景 覆盖内容或者追加内容</span></span><br><span class="line">[root@localhost test]# echo "hello world" &gt; l.log</span><br><span class="line">[root@localhost test]# ll</span><br><span class="line">总用量 4</span><br><span class="line">-rw-r--r--. 1 root root 12 4月  30 19:04 l.log</span><br><span class="line"><span class="meta">#</span><span class="bash"> &gt; 创建或覆盖 【高危命令】</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> &gt;&gt; 追加内容 不会进行覆盖</span></span><br></pre></td></tr></table></figure><h2 id="cat-amp-more-amp-less-查看文件内容"><a href="#cat-amp-more-amp-less-查看文件内容" class="headerlink" title="cat &amp; more &amp; less:查看文件内容"></a>cat &amp; more &amp; less:查看文件内容</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">cat 查看文件的所有内容 文件太大会导致一直刷屏 使用 Ctrl+z中断</span></span><br><span class="line"><span class="meta">#</span><span class="bash">more 文件内容一页一页的往下翻 按空格键往下 不能回退 使用q退出</span></span><br><span class="line"><span class="meta">#</span><span class="bash">less 文件内容还可以使用上下键进行上下查看内容 使用q退出</span></span><br><span class="line"><span class="meta">#</span><span class="bash">tail 实时查看文件的最新内容</span></span><br><span class="line">tail -f 1.log</span><br><span class="line">tail -F 1.log  == -f+retry  当文件不存在时候，会进行retry，当有对应的文件时，继续实时查看 </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">场景：采集业务<span class="built_in">log</span>日志 log4j</span></span><br><span class="line">规则：每份100M 保留10份</span><br><span class="line">    系统 --&gt; erp.log 90m ...100M</span><br><span class="line">    mv erp.log erp.log1</span><br><span class="line">    touch erp.log</span><br><span class="line">    ll 命令查看</span><br><span class="line">    erp.log</span><br><span class="line">    erp.log1</span><br><span class="line">    ...</span><br><span class="line">    erp.log10</span><br><span class="line"><span class="meta">#</span><span class="bash">大数据组件Flume <span class="built_in">exec</span> <span class="built_in">source</span> :tail -F erp.log</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">想要查看文件内容的倒数100行，同时实时监控</span></span><br><span class="line">tail -100f 1.log</span><br><span class="line">tail -100F 1.log --&gt; error</span><br></pre></td></tr></table></figure><h2 id="amp-grep-管道符-过滤"><a href="#amp-grep-管道符-过滤" class="headerlink" title="| &amp; grep :管道符 过滤"></a>| &amp; grep :管道符 过滤</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">场景：某个日志文件特别大，想要定位ERROR信息</span></span><br><span class="line">cat xxx.log | grep ERROR --&gt;当前行</span><br><span class="line">cat xxx.log | greo -A 5 ERROR --&gt;后五行</span><br><span class="line">cat xxx.log | greo -B 5 ERROR --&gt;前五行</span><br><span class="line">cat xxx.log | greo -C 5 ERROR --&gt;前后五行</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">场景：xx.log ERROR 很多</span></span><br><span class="line">cat xx.log | grep -C 5 ERROR &gt;20200430.log</span><br><span class="line">more 20200430.log</span><br></pre></td></tr></table></figure><h2 id="rz-amp-sz-上传-下载"><a href="#rz-amp-sz-上传-下载" class="headerlink" title="rz &amp; sz :上传 下载"></a>rz &amp; sz :上传 下载</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 安装工具包</span></span><br><span class="line">[root@localhost test]# yum install -y lrzsz.x86_64</span><br><span class="line"><span class="meta">#</span><span class="bash"> 下载 sz xx.log  Linux -&gt; Windows</span></span><br><span class="line">[root@localhost test]# sz 1.log </span><br><span class="line">rz</span><br><span class="line">Starting zmodem transfer.  Press Ctrl+C to cancel.</span><br><span class="line">Transferring 1.log...</span><br><span class="line"><span class="meta">  100%</span><span class="bash">      99 bytes   99 bytes/sec 00:00:01       0 Errors  </span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 上传 rz Windows -&gt;  Linux</span></span><br></pre></td></tr></table></figure><h2 id="alias-别名"><a href="#alias-别名" class="headerlink" title="alias:别名"></a>alias:别名</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# alias</span><br><span class="line">alias cp='cp -i'</span><br><span class="line">alias egrep='egrep --color=auto'</span><br><span class="line">alias fgrep='fgrep --color=auto'</span><br><span class="line">alias grep='grep --color=auto'</span><br><span class="line">alias l.='ls -d .* --color=auto'</span><br><span class="line">alias ll='ls -l --color=auto'</span><br><span class="line">alias ls='ls --color=auto'</span><br><span class="line">alias mv='mv -i'</span><br><span class="line">alias rm='rm -i'</span><br><span class="line">alias which='alias | /usr/bin/which --tty-only --read-alias --show-dot --show-tilde'</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">只对当前对话有效 其他会话不生效 是因为没有将别名配置在环境变量中</span></span><br><span class="line">[root@localhost ~]# alias xm='cd /tmp'</span><br><span class="line">[root@localhost ~]# xm</span><br><span class="line">[root@localhost tmp]#</span><br></pre></td></tr></table></figure><h2 id="环境变量"><a href="#环境变量" class="headerlink" title="环境变量"></a>环境变量</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">全局环境变量：/etc/profile 所有用户都可以使用</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">个人环境变量：~/.bash_profile 只能对当前用户使用 其他用户不能使用</span></span><br><span class="line">~/.bashrc 【推荐】</span><br><span class="line">场景：ssh远程执行B机器 命令找不到 java command not found</span><br><span class="line">     直接登录B机器 命令是找得到的 which java 是有的</span><br><span class="line">   命令的环境变量配置在.bash_profile 是不正确的</span><br><span class="line">   应该配置在.bashrc文件中</span><br><span class="line">   </span><br><span class="line"><span class="meta">#</span><span class="bash">生效环境变量</span></span><br><span class="line">source /etc/profile</span><br><span class="line">source ~/.bashrc</span><br><span class="line">source ~/.bash_profile</span><br><span class="line">cd 进入家目录</span><br><span class="line">. .bashrc</span><br></pre></td></tr></table></figure><h2 id="useradd-创建用户"><a href="#useradd-创建用户" class="headerlink" title="useradd:创建用户"></a>useradd:创建用户</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Linux 默认只有一个root超级管理员用户 </span></span><br><span class="line"><span class="meta">#</span><span class="bash">创建用户 useradd</span></span><br><span class="line">[root@localhost tmp]# useradd xmzhou</span><br><span class="line">[root@localhost tmp]# su - xmzhou</span><br><span class="line">[xmzhou@localhost ~]$ pwd</span><br><span class="line">/home/xmzhou</span><br><span class="line">[xmzhou@localhost ~]$ </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">再次验证使用别名</span></span><br><span class="line">[xmzhou@localhost ~]$ xm --&gt; 发现可以正常执行，是因为别名配置在全局环境变量中的</span><br><span class="line">[xmzhou@localhost tmp]$</span><br></pre></td></tr></table></figure><h2 id="history-历史命令"><a href="#history-历史命令" class="headerlink" title="history:历史命令"></a>history:历史命令</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[xmzhou@localhost tmp]$ history</span><br><span class="line">    1  pwd</span><br><span class="line">    2  xm</span><br><span class="line">    3  cd</span><br><span class="line">    4  pwd</span><br><span class="line">    5  xm</span><br><span class="line">    6  history</span><br><span class="line">[xmzhou@localhost tmp]$ </span><br><span class="line"><span class="meta">#</span><span class="bash">执行第一条命令</span></span><br><span class="line">[xmzhou@localhost tmp]$ !1</span><br><span class="line">pwd</span><br><span class="line">/tmp</span><br><span class="line"><span class="meta">#</span><span class="bash">清空历史 <span class="built_in">history</span> -c </span></span><br><span class="line"><span class="meta">#</span><span class="bash">此处注意，想要清空历史记录，有几种情况:</span></span><br><span class="line">直连服务器  ok</span><br><span class="line">跳板机(vpn) -&gt; 服务器 ok</span><br><span class="line">堡垒机 敲一个命令 都记录在堡垒机系统里 所以使用history -c 不行</span><br></pre></td></tr></table></figure><h2 id="rm-删除"><a href="#rm-删除" class="headerlink" title="rm:删除"></a>rm:删除</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost test]# rm 1.log </span><br><span class="line">rm：是否删除普通文件 "1.log"？y</span><br><span class="line">[root@localhost test]# </span><br><span class="line"></span><br><span class="line">[root@localhost test]# rm -f one.txt </span><br><span class="line"></span><br><span class="line">[root@localhost test]# rm -r two.txt </span><br><span class="line">rm：是否删除普通空文件 "two.txt"？y</span><br><span class="line">[root@localhost test]# rm -rf three.txt</span><br><span class="line"><span class="meta">#</span><span class="bash">rm -rf 【高危命令】</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">场景：</span></span><br><span class="line">shell脚本中</span><br><span class="line">log_path=/xxx/yyy</span><br><span class="line">业务逻辑判断，然后赋值</span><br><span class="line">此时漏了一种情况 没有赋值</span><br><span class="line">rm -rf $&#123;LOG_PATH/*&#125; ==&gt; rm -rf /*</span><br><span class="line">避免这个情况 每次删除之前，都判断$&#123;log_path&#125;是否存在</span><br></pre></td></tr></table></figure><h2 id="用户-amp-用户组"><a href="#用户-amp-用户组" class="headerlink" title="用户 &amp; 用户组"></a>用户 &amp; 用户组</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost test]# ll /usr/sbin/user*</span><br><span class="line">-rwxr-x---. 1 root root 118232 10月 31 2018 /usr/sbin/useradd</span><br><span class="line">-rwxr-x---. 1 root root  80400 10月 31 2018 /usr/sbin/userdel</span><br><span class="line">-rwxr-x---. 1 root root 113856 10月 31 2018 /usr/sbin/usermod</span><br><span class="line">-rwsr-xr-x. 1 root root  11376 10月 31 2018 /usr/sbin/usernetctl</span><br><span class="line">[root@localhost test]# </span><br><span class="line"></span><br><span class="line">[root@localhost test]# ll /usr/sbin/group*</span><br><span class="line">-rwxr-x---. 1 root root 65520 10月 31 2018 /usr/sbin/groupadd</span><br><span class="line">-rwxr-x---. 1 root root 57080 10月 31 2018 /usr/sbin/groupdel</span><br><span class="line">-rwxr-x---. 1 root root 57120 10月 31 2018 /usr/sbin/groupmems</span><br><span class="line">-rwxr-x---. 1 root root 76432 10月 31 2018 /usr/sbin/groupmod</span><br><span class="line">[root@localhost test]# </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">创建用户并查看ID</span></span><br><span class="line">[root@localhost test]# useradd hadoop</span><br><span class="line">[root@localhost test]# </span><br><span class="line">[root@localhost test]# id hadoop</span><br><span class="line">uid=1001(hadoop) gid=1001(hadoop) 组=1001(hadoop)</span><br><span class="line">[root@localhost test]# </span><br><span class="line"><span class="meta">#</span><span class="bash">创建了一个普通用户  用户名称hadoop</span></span><br><span class="line"><span class="meta">#</span><span class="bash">同时也创建一个 Hadoop用户组</span></span><br><span class="line"><span class="meta">#</span><span class="bash">设置Hadoop的用户组为Hadoop，且把这个Hadoop用户组设置为主族</span></span><br><span class="line"><span class="meta">#</span><span class="bash">同时也会创建家目录 /home/hadoop</span></span><br><span class="line">[root@localhost test]# ll /home/</span><br><span class="line">总用量 0</span><br><span class="line">drwx------. 2 hadoop hadoop 62 4月  30 20:03 hadoop</span><br><span class="line">drwx------. 2 xmzhou xmzhou 62 4月  30 19:47 xmzhou</span><br><span class="line">[root@localhost test]</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">用户存储信息 /etc/passwd</span></span><br><span class="line"><span class="meta">#</span><span class="bash">用户组      /etc/group</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 样式丢失</span></span><br><span class="line">[hadoop@localhost ~]$ ll -a</span><br><span class="line">总用量 12</span><br><span class="line">drwx------. 2 hadoop hadoop  62 4月  30 20:03 .</span><br><span class="line">drwxr-xr-x. 4 root   root    34 4月  30 20:03 ..</span><br><span class="line">-rw-r--r--. 1 hadoop hadoop  18 10月 31 2018 .bash_logout</span><br><span class="line">-rw-r--r--. 1 hadoop hadoop 193 10月 31 2018 .bash_profile</span><br><span class="line">-rw-r--r--. 1 hadoop hadoop 231 10月 31 2018 .bashrc</span><br><span class="line">[hadoop@localhost ~]$ rm -rf .bash*</span><br><span class="line">[hadoop@localhost ~]$ ll -a</span><br><span class="line">总用量 0</span><br><span class="line">drwx------. 2 hadoop hadoop  6 4月  30 20:14 .</span><br><span class="line">drwxr-xr-x. 4 root   root   34 4月  30 20:03 ..</span><br><span class="line">[hadoop@localhost ~]$ exit</span><br><span class="line"></span><br><span class="line">[root@localhost test]# su - hadoop</span><br><span class="line">上一次登录：四 4月 30 20:13:33 CST 2020pts/1 上</span><br><span class="line">-bash-4.2$ id</span><br><span class="line">uid=1001(hadoop) gid=1001(hadoop) 组=1001(hadoop) 环境=unconfined_u:unconfined_r:unconfined_t:s0-s0:c0.c1023</span><br><span class="line">-bash-4.2$ </span><br><span class="line"><span class="meta">#</span><span class="bash">解决样式丢失</span></span><br><span class="line">-bash-4.2$ cp /etc/skel/.* .</span><br><span class="line">cp: 略过目录"/etc/skel/."</span><br><span class="line">cp: 略过目录"/etc/skel/.."</span><br><span class="line">-bash-4.2$ ll -a</span><br><span class="line">总用量 16</span><br><span class="line">drwx------. 2 hadoop hadoop  83 4月  30 20:15 .</span><br><span class="line">drwxr-xr-x. 4 root   root    34 4月  30 20:03 ..</span><br><span class="line">-rw-------. 1 hadoop hadoop  34 4月  30 20:14 .bash_history</span><br><span class="line">-rw-r--r--. 1 hadoop hadoop  18 4月  30 20:15 .bash_logout</span><br><span class="line">-rw-r--r--. 1 hadoop hadoop 193 4月  30 20:15 .bash_profile</span><br><span class="line">-rw-r--r--. 1 hadoop hadoop 231 4月  30 20:15 .bashrc</span><br><span class="line">-bash-4.2$ exit</span><br><span class="line">登出</span><br><span class="line">[root@localhost test]# su - hadoop</span><br><span class="line">上一次登录：四 4月 30 20:14:29 CST 2020pts/1 上</span><br><span class="line">[hadoop@localhost ~]$ --&gt;样式恢复</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">添加用户到bigdata组</span></span><br><span class="line">[root@localhost hadoop]# groupadd bigdata</span><br><span class="line">[root@localhost hadoop]# usermod -a -G bigdata hadoop</span><br><span class="line">[root@localhost hadoop]# id hadoop</span><br><span class="line">uid=1001(hadoop) gid=1001(hadoop) 组=1001(hadoop),1002(bigdata)</span><br><span class="line">[root@localhost hadoop]# usermod --help</span><br><span class="line">用法：usermod [选项] 登录</span><br><span class="line"></span><br><span class="line">选项：</span><br><span class="line">  -c, --comment 注释            GECOS 字段的新值</span><br><span class="line">  -d, --home HOME_DIR           用户的新主目录</span><br><span class="line">  -e, --expiredate EXPIRE_DATE  设定帐户过期的日期为 EXPIRE_DATE</span><br><span class="line">  -f, --inactive INACTIVE       过期 INACTIVE 天数后，设定密码为失效状态</span><br><span class="line">  -g, --gid GROUP               强制使用 GROUP 为新主组</span><br><span class="line">  -G, --groups GROUPS           新的附加组列表 GROUPS</span><br><span class="line">  -a, --append GROUP            将用户追加至上边 -G 中提到的附加组中，</span><br><span class="line">                                并不从其它组中删除此用户</span><br><span class="line">  -h, --help                    显示此帮助信息并推出</span><br><span class="line">  -l, --login LOGIN             新的登录名称</span><br><span class="line">  -L, --lock                    锁定用户帐号</span><br><span class="line">  -m, --move-home               将家目录内容移至新位置 (仅于 -d 一起使用)</span><br><span class="line">  -o, --non-unique              允许使用重复的(非唯一的) UID</span><br><span class="line">  -p, --password PASSWORD       将加密过的密码 (PASSWORD) 设为新密码</span><br><span class="line">  -R, --root CHROOT_DIR         chroot 到的目录</span><br><span class="line">  -s, --shell SHELL             该用户帐号的新登录 shell</span><br><span class="line">  -u, --uid UID                 用户帐号的新 UID</span><br><span class="line">  -U, --unlock                  解锁用户帐号</span><br><span class="line">  -Z, --selinux-user  SEUSER       用户账户的新 SELinux 用户映射</span><br><span class="line">[root@localhost hadoop]# </span><br><span class="line">[root@localhost hadoop]# usermod -g bigdata hadoop</span><br><span class="line">[root@localhost hadoop]# id hadoop</span><br><span class="line">uid=1001(hadoop) gid=1002(bigdata) 组=1002(bigdata)</span><br><span class="line">[root@localhost hadoop]# </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">设置用户密码</span></span><br><span class="line">[root@localhost hadoop]# passwd hadoop</span><br><span class="line">更改用户 hadoop 的密码 。</span><br><span class="line">新的 密码：</span><br><span class="line">无效的密码： 密码少于 8 个字符</span><br><span class="line">重新输入新的 密码：</span><br><span class="line">passwd：所有的身份验证令牌已经成功更新。</span><br><span class="line">[root@localhost hadoop]#</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">切换用户</span></span><br><span class="line">su hadoop </span><br><span class="line">su - hadoop 【推荐】</span><br><span class="line">代表切换到hadoop用户，并且执行环境变量文件</span><br><span class="line"><span class="meta">#</span><span class="bash">sudo 普通用户临时使用root的最大权限</span></span><br><span class="line">[root@localhost hadoop]# vi /etc/sudoers</span><br><span class="line">hadoop  ALL=(ALL)       NOPASSWD:ALL</span><br><span class="line"></span><br><span class="line">[hadoop@localhost ~]$ ls /root/</span><br><span class="line">ls: 无法打开目录/root/: 权限不够</span><br><span class="line">[hadoop@localhost ~]$ sudo ls /root/</span><br><span class="line">aa  anaconda-ks.cfg  test  three  two</span><br><span class="line">[hadoop@localhost ~]$ </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">/etc/passwd文件</span></span><br><span class="line"><span class="meta">#</span><span class="bash">创建用户后默认</span></span><br><span class="line">hadoop:x:1001:1002::/home/hadoop:/bin/bash</span><br><span class="line"><span class="meta">#</span><span class="bash">此处修改参数 切换用户失败 但是会提示</span></span><br><span class="line">hadoop:x:1001:1002::/home/hadoop:/sbin/nologin</span><br><span class="line">[root@localhost ~]# su - hadoop</span><br><span class="line">上一次登录：四 4月 30 20:26:01 CST 2020pts/1 上</span><br><span class="line">This account is currently not available.</span><br><span class="line"><span class="meta">#</span><span class="bash">此处再次修改参数 此时切换用户失败 但是不会提示</span></span><br><span class="line">hadoop:x:1001:1002::/home/hadoop:/usr/bin/false</span><br></pre></td></tr></table></figure><h2 id="权限"><a href="#权限" class="headerlink" title="权限"></a>权限</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">-rw-------. 1 root root 1257 5月   1 2020 anaconda-ks.cfg</span><br><span class="line"><span class="meta">#</span><span class="bash">第一个字母 ：d代表文件夹 -代表文件 l代表连接</span></span><br><span class="line"><span class="meta">#</span><span class="bash">后面九个字母 三个为一组</span></span><br><span class="line"></span><br><span class="line">r:read 读权限 4</span><br><span class="line">w:write 写权限 2</span><br><span class="line">x:执行         1</span><br><span class="line">-:没有权限      0 占位</span><br><span class="line">rw- 第一组 6 代表文件或文件夹的所属用户，有读写权限</span><br><span class="line">--- 第二组 0 代表文件或文件夹的所属用户组，都没有权限</span><br><span class="line">--- 第三组 0 代表其他用户组的用户对这个文件或文件夹，都没有权限</span><br><span class="line"><span class="meta">#</span><span class="bash">关于权限：</span></span><br><span class="line">chmod -R 777 文件夹或者文件</span><br><span class="line">chown -R 用户:用户组 文件夹或者文件</span><br></pre></td></tr></table></figure><h2 id="大小"><a href="#大小" class="headerlink" title="大小"></a>大小</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">查看文件大小 ll -h 、 du -sh</span></span><br><span class="line">[root@localhost ~]# ll -h</span><br><span class="line">总用量 4.0K</span><br><span class="line">drwxr-xr-x. 3 root root   16 4月  30 18:44 aa</span><br><span class="line">-rw-------. 1 root root 1.3K 5月   1 2020 anaconda-ks.cfg</span><br><span class="line">drwxr-xr-x. 2 root root   19 4月  30 20:43 test</span><br><span class="line">drwxr-xr-x. 2 root root    6 4月  30 18:44 three</span><br><span class="line">drwxr-xr-x. 3 root root   39 4月  30 18:57 two</span><br><span class="line"><span class="meta">#</span><span class="bash">查看文件夹大小        du -sh</span></span><br><span class="line">[root@localhost ~]# du -sh test/</span><br><span class="line">4.0K    test/</span><br><span class="line">[root@localhost ~]#</span><br></pre></td></tr></table></figure><h2 id="find-搜索"><a href="#find-搜索" class="headerlink" title="find:搜索"></a>find:搜索</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# find / -name '*hadoop*'</span><br><span class="line">/var/spool/mail/hadoop</span><br><span class="line">/home/hadoop</span><br><span class="line">[root@localhost ~]# find /home/hadoop -name '*hadoop*' </span><br><span class="line">/home/hadoop</span><br><span class="line">[root@localhost ~]#</span><br></pre></td></tr></table></figure><h2 id="ps-查看进程"><a href="#ps-查看进程" class="headerlink" title="ps:查看进程"></a>ps:查看进程</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# ps -ef</span><br><span class="line">UID         PID   PPID  C STIME TTY          TIME CMD</span><br><span class="line">root          1      0  0 17:40 ?        00:00:01 /usr/lib/systemd/systemd --switched-root --system --deserialize</span><br></pre></td></tr></table></figure><h2 id="vi-编辑"><a href="#vi-编辑" class="headerlink" title="vi:编辑"></a>vi:编辑</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">1.在vi中搜索 -&gt; 尾行模式 -&gt; /关键字</span></span><br><span class="line"><span class="meta">#</span><span class="bash">1.1使用n键进行下一个关键字查找</span></span><br><span class="line"><span class="meta">#</span><span class="bash">2.显示行号 -&gt; 尾行模式 -&gt;输入冒号 -&gt; <span class="built_in">set</span> nu 显示行号</span></span><br><span class="line"> set nonu 取消行号</span><br><span class="line"><span class="meta">#</span><span class="bash">3.常用快捷键</span></span><br><span class="line"><span class="meta">#</span><span class="bash">dd 删除当前行</span></span><br><span class="line"><span class="meta">#</span><span class="bash">ndd 删除当前及以下n行</span></span><br><span class="line"><span class="meta">#</span><span class="bash">dG 删除当前行及以下所有行</span></span><br><span class="line"><span class="meta">#</span><span class="bash">gg 跳转到第一行的第一个字母</span></span><br><span class="line"><span class="meta">#</span><span class="bash">G 跳转到最后一行的第一个字母</span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="built_in">shift</span>+$ 光标跳到行尾</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">场景：清空一个文件内容，从另外一个文件中拷贝过来</span></span><br><span class="line">gg -&gt; dG -&gt; i -&gt; 粘贴</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">清空文件补充：</span></span><br><span class="line"><span class="meta">#</span><span class="bash">cat /dev/null &gt; a.log</span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="built_in">echo</span> <span class="string">""</span> &gt; b.log</span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="literal">true</span> &gt; c.log</span></span><br><span class="line">[root@localhost test]# cat /dev/null &gt;a.log </span><br><span class="line">[root@localhost test]# echo "" &gt; b.log</span><br><span class="line">[root@localhost test]# ll</span><br><span class="line">总用量 4</span><br><span class="line">-rw-r--r--. 1 root root 0 4月  30 20:59 a.log 空文件</span><br><span class="line">-rw-r--r--. 1 root root 1 4月  30 20:59 b.log 非空文件</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">场景：</span></span><br><span class="line">shell脚本，数据文件清空操作，根据字节大小判断是否清空完成</span><br><span class="line">echo  "" &gt; 2.log --&gt; 不是非空</span><br><span class="line">if filezie &gt; 0 then</span><br><span class="line">   业务不操作</span><br><span class="line"></span><br><span class="line">else</span><br><span class="line">    2.log 灌业务数据</span><br></pre></td></tr></table></figure><h2 id="系统常用检查命令"><a href="#系统常用检查命令" class="headerlink" title="系统常用检查命令"></a>系统常用检查命令</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">查看磁盘信息 df -h</span></span><br><span class="line"><span class="meta">#</span><span class="bash">查看内存信息 free -m</span></span><br><span class="line"><span class="meta">#</span><span class="bash">查看负载 top</span></span><br><span class="line"></span><br><span class="line">[root@localhost ~]# free -m</span><br><span class="line">              total        used        free      shared  buff/cache   available</span><br><span class="line">Mem:            972         161         495           7         315         614</span><br><span class="line">Swap:          2047           0        2047</span><br><span class="line"><span class="meta">#</span><span class="bash">大数据生产服务器中，swap通常设置成0,10(惰性，尽可能不使用),使用swap分区充当内存，使用硬盘充当内存，效率会下降</span></span><br><span class="line"></span><br><span class="line">[root@localhost ~]# df -h</span><br><span class="line">文件系统                 容量  已用  可用 已用% 挂载点</span><br><span class="line">/dev/mapper/centos-root   17G  1.1G   16G    7% /</span><br><span class="line">/dev/sda1               1014M  133M  882M   14% /boot</span><br><span class="line"></span><br><span class="line">devtmpfs                 475M     0  475M    0% /dev</span><br><span class="line">tmpfs                    487M     0  487M    0% /dev/shm</span><br><span class="line">tmpfs                    487M  7.7M  479M    2% /run</span><br><span class="line">tmpfs                    487M     0  487M    0% /sys/fs/cgroup</span><br><span class="line">tmpfs                     98M     0   98M    0% /run/user/0</span><br><span class="line">[root@localhost ~]# </span><br><span class="line"></span><br><span class="line">top - 08:51:27 up  3:31,  4 users,  load average: 0.00, 0.01, 0.05</span><br><span class="line">Tasks: 112 total,   1 running, 111 sleeping,   0 stopped,   0 zombie</span><br><span class="line"><span class="meta">%</span><span class="bash">Cpu(s):  0.0 us,  0.3 sy,  0.0 ni, 99.7 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st</span></span><br><span class="line">KiB Mem :   995896 total,   505936 free,   165756 used,   324204 buff/cache</span><br><span class="line">KiB Swap:  2097148 total,  2097148 free,        0 used.   628224 avail Mem </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">系统负载</span></span><br><span class="line">load average: 0.00, 0.01, 0.05 </span><br><span class="line">   1min  5min  15min</span><br><span class="line"><span class="meta">#</span><span class="bash">经验值 ：10 如果load average 数值大于了10 就认为服务器卡</span></span><br><span class="line"><span class="meta">#</span><span class="bash">可能存在以下几种问题：</span></span><br><span class="line">1.程序问题，在大量的跑计算内容</span><br><span class="line">2.是不是被挖矿了 yarn、redis 最容易被攻击</span><br><span class="line">3.硬件原因</span><br></pre></td></tr></table></figure><h2 id="yum"><a href="#yum" class="headerlink" title="yum"></a>yum</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">下载httpd服务</span></span><br><span class="line">[root@localhost ~]# yum search httpd</span><br><span class="line">[root@localhost ~]# yum install -y httpd.x86_64</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">启动服务</span></span><br><span class="line"><span class="meta">#</span><span class="bash">centos6:</span></span><br><span class="line">service httpd status | start | stop</span><br><span class="line"><span class="meta">#</span><span class="bash">centos7:</span></span><br><span class="line">service httpd status | start | stop 兼容6</span><br><span class="line">systemctl status | start | stop httpd app2 app3 一次性可以操作多个应用</span><br><span class="line"><span class="meta">#</span><span class="bash">搜索 卸载</span></span><br><span class="line">[root@localhost ~]# rpm -qa| grep httpd</span><br><span class="line">httpd-tools-2.4.6-93.el7.centos.x86_64</span><br><span class="line">httpd-2.4.6-93.el7.centos.x86_64</span><br><span class="line">[root@localhost ~]# rpm -e 包名称 --nodeps</span><br><span class="line">[root@localhost ~]# yum remove 包名称</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">查看进程</span></span><br><span class="line">[root@localhost ~]# ps -ef | grep httpd</span><br><span class="line">root      19936      1  0 09:08 ?        00:00:00 /usr/sbin/httpd -DFOREGROUND</span><br><span class="line">apache    19937  19936  0 09:08 ?        00:00:00 /usr/sbin/httpd -DFOREGROUND</span><br><span class="line">apache    19938  19936  0 09:08 ?        00:00:00 /usr/sbin/httpd -DFOREGROUND</span><br><span class="line">apache    19939  19936  0 09:08 ?        00:00:00 /usr/sbin/httpd -DFOREGROUND</span><br><span class="line">apache    19940  19936  0 09:08 ?        00:00:00 /usr/sbin/httpd -DFOREGROUND</span><br><span class="line">apache    19941  19936  0 09:08 ?        00:00:00 /usr/sbin/httpd -DFOREGROUND</span><br><span class="line">root      20124  18242  0 09:12 pts/2    00:00:00 grep --color=auto httpd</span><br><span class="line"><span class="meta">#</span><span class="bash">杀死进程</span></span><br><span class="line">[root@localhost ~]# kill -9 19936</span><br><span class="line"><span class="meta">#</span><span class="bash">查看端口号</span></span><br><span class="line">[root@localhost ~]# netstat -nltp | grep 19936</span><br><span class="line">tcp6       0      0 :::80                   :::*                    LISTEN      19936/httpd         </span><br><span class="line"><span class="meta">#</span><span class="bash">注意：进程不一定都会占用端口号 但是 与其他服务通信必须需要端口号</span></span><br></pre></td></tr></table></figure><h2 id="压缩-amp-解压"><a href="#压缩-amp-解压" class="headerlink" title="压缩 &amp; 解压"></a>压缩 &amp; 解压</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">zip unzip</span></span><br><span class="line"><span class="meta">#</span><span class="bash">tar -zxvf</span></span><br><span class="line"><span class="meta">#</span><span class="bash">tar -zcvf</span></span><br></pre></td></tr></table></figure><h2 id="shell脚本"><a href="#shell脚本" class="headerlink" title="shell脚本"></a>shell脚本</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost test]# vi a.sh</span><br><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">date</span><br><span class="line"></span><br><span class="line">[root@localhost test]# sh ./a.sh </span><br><span class="line">2020年 05月 01日 星期五 12:35:04 CST</span><br><span class="line">[root@localhost test]# chmod 744 a.sh </span><br><span class="line">[root@localhost test]# ll</span><br><span class="line">总用量 4</span><br><span class="line">-rwxr--r--. 1 root root 17 5月   1 12:32 a.sh</span><br><span class="line">[root@localhost test]# ./a.sh </span><br><span class="line">2020年 05月 01日 星期五 12:35:25 CST</span><br><span class="line">[root@localhost test]#</span><br></pre></td></tr></table></figure><h2 id="crontab-定时任务"><a href="#crontab-定时任务" class="headerlink" title="crontab:定时任务"></a>crontab:定时任务</h2><h3 id="在线校验工具地址："><a href="#在线校验工具地址：" class="headerlink" title="在线校验工具地址："></a>在线校验工具地址：</h3><p><a href="https://tool.lu/crontab/" target="_blank" rel="noopener">https://tool.lu/crontab/</a></p><table><thead><tr><th>*</th><th>*</th><th>*</th><th>*</th><th>*</th></tr></thead><tbody><tr><td>minute</td><td>hour</td><td>day</td><td>month</td><td>week</td></tr><tr><td>分</td><td>时</td><td>天</td><td>月</td><td>周</td></tr><tr><td>0-59</td><td>0-23</td><td>1-31</td><td>1-12</td><td>0-6(0 代表周日)</td></tr></tbody></table><blockquote><ul><li><code>*</code> :表示每的意思，例如month字段如果是*的话，则表示每月都执行</li><li><code>,</code>:表示分隔时段的意思，例如 “1,3,5”</li><li><code>-</code>:表示一个时间范围 例如”2-6” 表示 “2,3,4,5,6”</li><li><code>/</code>:可以使用斜线制定时间的间隔频率 例如0-23/2 表示每两小时执行一次 同时正斜线可以和星号一起使用，例如*/10，如果用在minute字段，表示每十分钟执行一次</li></ul></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">场景：每10s打印一次</span></span><br><span class="line">*/6 * * * * 这种写法是错误的 此处的意思是每6分钟打印一次</span><br><span class="line"><span class="meta">#</span><span class="bash">解决方案：</span></span><br><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">for((i=1;i&lt;=6;i++));</span><br><span class="line">do</span><br><span class="line">date</span><br><span class="line">sleep 10s</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">后台执行脚本</span></span><br><span class="line">&amp;: 表示后台运行</span><br><span class="line">nohup /root/a.sh &gt;&gt; /root/a.log 2&gt;&amp;1 &amp;</span><br><span class="line"><span class="meta">#</span><span class="bash"> /root/a.sh &gt;&gt; /root/a.log 是将a.sh的输出重定向到a.log文件中，即输出内容不打印到控制台，而是输出到文件中</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 2&gt;&amp;1 是将标准出错重定向到标准输出，即此处将标准出错也输出到a.log文件中</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class
      
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>MySQL整理</title>
    <link href="http://yoursite.com/2020/05/03/MySQL/"/>
    <id>http://yoursite.com/2020/05/03/MySQL/</id>
    <published>2020-05-03T07:03:09.599Z</published>
    <updated>2020-05-06T03:05:15.316Z</updated>
    
    <content type="html"><![CDATA[<h2 id="一、Linux部署MySQL"><a href="#一、Linux部署MySQL" class="headerlink" title="一、Linux部署MySQL"></a>一、Linux部署MySQL</h2><h3 id="1-解压及创建目录"><a href="#1-解压及创建目录" class="headerlink" title="1.解压及创建目录"></a>1.解压及创建目录</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# ll</span><br><span class="line">-rw-r--r--. 1 root root 548193637 5月   1 14:36 mysql-5.7.11-linux-glibc2.5-x86_64.tar.gz</span><br><span class="line"><span class="meta">#</span><span class="bash">移动压缩包到/usr/<span class="built_in">local</span>目录下</span></span><br><span class="line">[root@localhost ~]# mv mysql-5.7.11-linux-glibc2.5-x86_64.tar.gz /usr/local/</span><br><span class="line"><span class="meta">#</span><span class="bash">解压mysql</span></span><br><span class="line">[root@localhost local]# tar -zxvf mysql-5.7.11-linux-glibc2.5-x86_64.tar.gz</span><br><span class="line">[root@localhost local]# mv mysql-5.7.11-linux-glibc2.5-x86_64 mysql</span><br><span class="line">[root@localhost local]# ll</span><br><span class="line">drwxr-xr-x. 9 7161 wheel       129 2月   2 2016 mysql</span><br><span class="line"><span class="meta">#</span><span class="bash">注意 解压后用户和用户组发生了变化，必须更改</span></span><br><span class="line">[root@localhost local]# chown -R root:root mysql</span><br><span class="line">[root@localhost local]# ll</span><br><span class="line">drwxr-xr-x. 9 root root       129 2月   2 2016 mysql</span><br><span class="line"><span class="meta">#</span><span class="bash">创建对应的目录</span></span><br><span class="line">[root@localhost local]# mkdir mysql/arch mysql/data mysql/tmp</span><br></pre></td></tr></table></figure><h3 id="2-创建my-cnf"><a href="#2-创建my-cnf" class="headerlink" title="2.创建my.cnf"></a>2.创建my.cnf</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br></pre></td><td class="code"><pre><span class="line">root@localhost mysql]# vi /etc/my.cnf</span><br><span class="line">[client]</span><br><span class="line">port            = 3306</span><br><span class="line">socket          = /usr/local/mysql/data/mysql.sock</span><br><span class="line">default-character-set=utf8mb4</span><br><span class="line"></span><br><span class="line">[mysqld]</span><br><span class="line">port            = 3306</span><br><span class="line">socket          = /usr/local/mysql/data/mysql.sock</span><br><span class="line"></span><br><span class="line">skip-slave-start</span><br><span class="line"></span><br><span class="line">skip-external-locking</span><br><span class="line">key_buffer_size = 256M</span><br><span class="line">sort_buffer_size = 2M</span><br><span class="line">read_buffer_size = 2M</span><br><span class="line">read_rnd_buffer_size = 4M</span><br><span class="line">query_cache_size= 32M</span><br><span class="line">max_allowed_packet = 16M</span><br><span class="line">myisam_sort_buffer_size=128M</span><br><span class="line">tmp_table_size=32M</span><br><span class="line"></span><br><span class="line">table_open_cache = 512</span><br><span class="line">thread_cache_size = 8</span><br><span class="line">wait_timeout = 86400</span><br><span class="line">interactive_timeout = 86400</span><br><span class="line">max_connections = 600</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Try number of CPU<span class="string">'s*2 for thread_concurrency</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">thread_concurrency = 32 </span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">isolation level and default engine </span></span><br><span class="line">default-storage-engine = INNODB</span><br><span class="line">transaction-isolation = READ-COMMITTED</span><br><span class="line"></span><br><span class="line">server-id  = 1739</span><br><span class="line">basedir     = /usr/local/mysql</span><br><span class="line">datadir     = /usr/local/mysql/data</span><br><span class="line">pid-file     = /usr/local/mysql/data/hostname.pid</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">open performance schema</span></span><br><span class="line">log-warnings</span><br><span class="line">sysdate-is-now</span><br><span class="line"></span><br><span class="line">binlog_format = ROW</span><br><span class="line">log_bin_trust_function_creators=1</span><br><span class="line">log-error  = /usr/local/mysql/data/hostname.err</span><br><span class="line">log-bin = /usr/local/mysql/arch/mysql-bin</span><br><span class="line">expire_logs_days = 7</span><br><span class="line"></span><br><span class="line">innodb_write_io_threads=16</span><br><span class="line"></span><br><span class="line">relay-log  = /usr/local/mysql/relay_log/relay-log</span><br><span class="line">relay-log-index = /usr/local/mysql/relay_log/relay-log.index</span><br><span class="line">relay_log_info_file= /usr/local/mysql/relay_log/relay-log.info</span><br><span class="line"></span><br><span class="line">log_slave_updates=1</span><br><span class="line">gtid_mode=OFF</span><br><span class="line">enforce_gtid_consistency=OFF</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> slave</span></span><br><span class="line">slave-parallel-type=LOGICAL_CLOCK</span><br><span class="line">slave-parallel-workers=4</span><br><span class="line">master_info_repository=TABLE</span><br><span class="line">relay_log_info_repository=TABLE</span><br><span class="line">relay_log_recovery=ON</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">other logs</span></span><br><span class="line"><span class="meta">#</span><span class="bash">general_log =1</span></span><br><span class="line"><span class="meta">#</span><span class="bash">general_log_file  = /usr/<span class="built_in">local</span>/mysql/data/general_log.err</span></span><br><span class="line"><span class="meta">#</span><span class="bash">slow_query_log=1</span></span><br><span class="line"><span class="meta">#</span><span class="bash">slow_query_log_file=/usr/<span class="built_in">local</span>/mysql/data/slow_log.err</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="keyword">for</span> replication slave</span></span><br><span class="line">sync_binlog = 500</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="keyword">for</span> innodb options </span></span><br><span class="line">innodb_data_home_dir = /usr/local/mysql/data/</span><br><span class="line">innodb_data_file_path = ibdata1:1G;ibdata2:1G:autoextend</span><br><span class="line"></span><br><span class="line">innodb_log_group_home_dir = /usr/local/mysql/arch</span><br><span class="line">innodb_log_files_in_group = 4</span><br><span class="line">innodb_log_file_size = 1G</span><br><span class="line">innodb_log_buffer_size = 200M</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">根据生产需要，调整pool size </span></span><br><span class="line">innodb_buffer_pool_size = 2G</span><br><span class="line"><span class="meta">#</span><span class="bash">innodb_additional_mem_pool_size = 50M <span class="comment">#deprecated in 5.6</span></span></span><br><span class="line">tmpdir = /usr/local/mysql/tmp</span><br><span class="line"></span><br><span class="line">innodb_lock_wait_timeout = 1000</span><br><span class="line"><span class="meta">#</span><span class="bash">innodb_thread_concurrency = 0</span></span><br><span class="line">innodb_flush_log_at_trx_commit = 2</span><br><span class="line"></span><br><span class="line">innodb_locks_unsafe_for_binlog=1</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">innodb io features: add <span class="keyword">for</span> mysql5.5.8</span></span><br><span class="line">performance_schema</span><br><span class="line">innodb_read_io_threads=4</span><br><span class="line">innodb-write-io-threads=4</span><br><span class="line">innodb-io-capacity=200</span><br><span class="line"><span class="meta">#</span><span class="bash">purge threads change default(0) to 1 <span class="keyword">for</span> purge</span></span><br><span class="line">innodb_purge_threads=1</span><br><span class="line">innodb_use_native_aio=on</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="keyword">case</span>-sensitive file names and separate tablespace</span></span><br><span class="line">innodb_file_per_table = 1</span><br><span class="line">lower_case_table_names=1</span><br><span class="line"></span><br><span class="line">[mysqldump]</span><br><span class="line">quick</span><br><span class="line">max_allowed_packet = 128M</span><br><span class="line"></span><br><span class="line">[mysql]</span><br><span class="line">no-auto-rehash</span><br><span class="line">default-character-set=utf8mb4</span><br><span class="line"></span><br><span class="line">[mysqlhotcopy]</span><br><span class="line">interactive-timeout</span><br><span class="line"></span><br><span class="line">[myisamchk]</span><br><span class="line">key_buffer_size = 256M</span><br><span class="line">sort_buffer_size = 256M</span><br><span class="line">read_buffer = 2M</span><br><span class="line">write_buffer = 2M</span><br></pre></td></tr></table></figure><h3 id="3-创建用户及用户组"><a href="#3-创建用户及用户组" class="headerlink" title="3.创建用户及用户组"></a>3.创建用户及用户组</h3><p>mysql  –&gt; mysql用户管理</p><p>oracle  —&gt; oracle用户管理</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">创建用户组</span></span><br><span class="line">[root@localhost mysql]# groupadd -g 101 dba</span><br><span class="line"><span class="meta">#</span><span class="bash">创建用户</span></span><br><span class="line">[root@localhost mysql]# useradd -u 514 -g dba -G root -d /usr/local/mysql mysqladmin</span><br><span class="line">[root@localhost mysql]# id mysqladmin</span><br><span class="line">uid=514(mysqladmin) gid=101(dba) 组=101(dba),0(root)</span><br><span class="line">[root@localhost mysql]#</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">一般不需要设置mysqladmin的密码 直接从root用户或者sudo切换</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">copy环境变量配置文件到mysqladmin用户的家目录 防止样式丢失</span></span><br><span class="line">[root@localhost mysql]# cp /etc/skel/.* /usr/local/mysql</span><br><span class="line">cp: 略过目录"/etc/skel/."</span><br><span class="line">cp: 略过目录"/etc/skel/.."</span><br><span class="line">[root@localhost mysql]# </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">配置环境变量</span></span><br><span class="line">[root@localhost mysql]# vi .bashrc</span><br><span class="line"></span><br><span class="line">export MYSQL_BASE=/usr/local/mysql</span><br><span class="line">export PATH=$&#123;MYSQL_BASE&#125;/bin:$PATH</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">unset USERNAME</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">stty erase ^H</span></span><br><span class="line">set umask to 022</span><br><span class="line">umask 022</span><br><span class="line">PS1=`uname -n`":"'$USER'":"'$PWD'":&gt;"; export PS1</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">切换用户</span></span><br><span class="line">[root@localhost ~]# su - mysqladmin</span><br><span class="line">上一次登录：五 5月  1 15:06:51 CST 2020pts/0 上</span><br><span class="line">localhost.localdomain:mysqladmin:/usr/local/mysql:&gt;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">赋权限和用户组，切换mysqladmin用户，安装</span></span><br><span class="line">[root@localhost local]# chown  mysqladmin:dba /etc/my.cnf </span><br><span class="line">[root@localhost local]# chmod  640 /etc/my.cnf  </span><br><span class="line">[root@localhost local]# chown -R mysqladmin:dba /usr/local/mysql</span><br><span class="line">[root@localhost local]# chmod -R 755 /usr/local/mysql </span><br><span class="line">[root@localhost local]# </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">配置服务及开机自启动</span></span><br><span class="line">[root@localhost local]# cd /usr/local/mysql</span><br><span class="line"><span class="meta">#</span><span class="bash">将服务文件拷贝到init.d下，并重命名为mysql</span></span><br><span class="line">[root@localhost mysql]# cp support-files/mysql.server /etc/rc.d/init.d/mysql</span><br><span class="line">[root@localhost mysql]#</span><br><span class="line"><span class="meta">#</span><span class="bash">赋予可执行权限</span></span><br><span class="line">[root@localhost mysql]# chmod +x /etc/rc.d/init.d/mysql</span><br><span class="line"><span class="meta">#</span><span class="bash">删除服务</span></span><br><span class="line">[root@localhost mysql]# chkconfig --del mysql</span><br><span class="line"><span class="meta">#</span><span class="bash">添加服务</span></span><br><span class="line">[root@localhost mysql]#  chkconfig --add mysql</span><br><span class="line">[root@localhost mysql]# chkconfig --level 345 mysql on</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">安装libaio及安装mysql的初始db</span></span><br><span class="line">[root@localhost mysql]# yum -y install libaio</span><br><span class="line">[root@localhost mysql]# sudo su - mysqladmin</span><br><span class="line">上一次登录：五 5月  1 15:07:44 CST 2020pts/0 上</span><br><span class="line">localhost.localdomain:mysqladmin:/usr/local/mysql:&gt;</span><br><span class="line"></span><br><span class="line">localhost.localdomain:mysqladmin:/usr/local/mysql:&gt;bin/mysqld \</span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> --defaults-file=/etc/my.cnf \</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> --user=mysqladmin \</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> --basedir=/usr/<span class="built_in">local</span>/mysql/ \</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> --datadir=/usr/<span class="built_in">local</span>/mysql/data/ \</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> --initialize</span></span><br><span class="line"><span class="meta">#</span><span class="bash">查看临时密码</span></span><br><span class="line">localhost.localdomain:mysqladmin:/usr/local/mysql/data:&gt;cat hostname.err | grep password</span><br><span class="line">2020-05-01T07:17:11.213380Z 1 [Note] A temporary password is generated for root@localhost: =4PO-_AhhCzU</span><br><span class="line">localhost.localdomain:mysqladmin:/usr/local/mysql/data:&gt;</span><br><span class="line"><span class="meta">#</span><span class="bash">启动</span></span><br><span class="line">localhost.localdomain:mysqladmin:/usr/local/mysql/data:&gt;/usr/local/mysql/bin/mysqld_safe --defaults-file=/etc/my.cnf &amp;</span><br><span class="line">[1] 39294</span><br><span class="line">localhost.localdomain:mysqladmin:/usr/local/mysql/data:&gt;2020-05-01T07:19:04.015389Z mysqld_safe Logging to '/usr/local/mysql/data/hostname.err'.</span><br><span class="line">2020-05-01T07:19:04.040297Z mysqld_safe Starting mysqld daemon with databases from /usr/local/mysql/data</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">登录 &amp; 修改密码</span></span><br><span class="line">localhost.localdomain:mysqladmin:/usr/local/mysql/data:&gt;mysql -uroot -p=4PO-_AhhCzU </span><br><span class="line">mysql: [Warning] Using a password on the command line interface can be insecure.</span><br><span class="line">Welcome to the MySQL monitor.  Commands end with ; or \g.</span><br><span class="line">Your MySQL connection id is 3</span><br><span class="line">Server version: 5.7.11-log</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2016, Oracle and/or its affiliates. All rights reserved.</span><br><span class="line"></span><br><span class="line">Oracle is a registered trademark of Oracle Corporation and/or its</span><br><span class="line">affiliates. Other names may be trademarks of their respective</span><br><span class="line">owners.</span><br><span class="line"></span><br><span class="line">Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.</span><br><span class="line"></span><br><span class="line"><span class="meta">mysql&gt;</span><span class="bash"> </span></span><br><span class="line"><span class="meta">mysql&gt;</span><span class="bash"> <span class="built_in">set</span> password =password(<span class="string">"123456"</span>);</span></span><br><span class="line">Query OK, 0 rows affected, 1 warning (0.00 sec)</span><br><span class="line"></span><br><span class="line"><span class="meta">mysql&gt;</span><span class="bash"> flush privileges;</span></span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line"><span class="meta">mysql&gt;</span><span class="bash"><span class="built_in">exit</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">重启</span></span><br><span class="line">localhost.localdomain:mysqladmin:/usr/local/mysql/data:&gt;service mysql restart</span><br><span class="line">Shutting down MySQL..2020-05-01T07:23:48.645194Z mysqld_safe mysqld from pid file /usr/local/mysql/data/hostname.pid ended</span><br><span class="line"> SUCCESS! </span><br><span class="line">Starting MySQL. SUCCESS! </span><br><span class="line">[1]+  完成                  /usr/local/mysql/bin/mysqld_safe --defaults-file=/etc/my.cnf</span><br><span class="line">localhost.localdomain:mysqladmin:/usr/local/mysql/data:&gt;</span><br><span class="line"></span><br><span class="line">localhost.localdomain:mysqladmin:/usr/local/mysql/data:&gt;mysql -uroot -p123456</span><br><span class="line">mysql: [Warning] Using a password on the command line interface can be insecure.</span><br><span class="line">Welcome to the MySQL monitor.  Commands end with ; or \g.</span><br><span class="line">Your MySQL connection id is 2</span><br><span class="line">Server version: 5.7.11-log MySQL Community Server (GPL)</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2016, Oracle and/or its affiliates. All rights reserved.</span><br><span class="line"></span><br><span class="line">Oracle is a registered trademark of Oracle Corporation and/or its</span><br><span class="line">affiliates. Other names may be trademarks of their respective</span><br><span class="line">owners.</span><br><span class="line"></span><br><span class="line">Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.</span><br><span class="line"></span><br><span class="line"><span class="meta">mysql&gt;</span><span class="bash"> </span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">修改登录权限</span></span><br><span class="line"><span class="meta">mysql&gt;</span><span class="bash"> select User,Host from user;</span></span><br><span class="line">+-----------+-----------+</span><br><span class="line">| User      | Host      |</span><br><span class="line">+-----------+-----------+</span><br><span class="line">| mysql.sys | localhost |</span><br><span class="line">| root      | localhost |</span><br><span class="line">+-----------+-----------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line"><span class="meta">mysql&gt;</span><span class="bash"> update user <span class="built_in">set</span> Host=<span class="string">"%"</span> <span class="built_in">where</span> User=<span class="string">"root"</span>;</span></span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line">Rows matched: 1  Changed: 1  Warnings: 0</span><br><span class="line"></span><br><span class="line"><span class="meta">mysql&gt;</span><span class="bash"> flush privileges;</span></span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line"><span class="meta">mysql&gt;</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> % 代表任意客户端机器都可以访问mysql服务器</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 192.168.1.1 代表这台机器有权限访问</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 192.168.1.% 代表这个网段的所有ip都有权限访问</span></span><br></pre></td></tr></table></figure><h2 id="二、常用操作"><a href="#二、常用操作" class="headerlink" title="二、常用操作"></a>二、常用操作</h2><h3 id="查看进程"><a href="#查看进程" class="headerlink" title="查看进程"></a>查看进程</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show processlist;</span><br><span class="line">+<span class="comment">----+------+--------------------+-------+---------+------+----------+------------------+</span></span><br><span class="line">| Id | User | Host               | db    | Command | Time | State    | Info             |</span><br><span class="line">+<span class="comment">----+------+--------------------+-------+---------+------+----------+------------------+</span></span><br><span class="line">|  2 | root | localhost          | mysql | Query   |    0 | starting | <span class="keyword">show</span> <span class="keyword">processlist</span> |</span><br><span class="line">|  <span class="number">5</span> | root | <span class="number">192.168</span><span class="number">.18</span><span class="number">.1</span>:<span class="number">59227</span> | <span class="literal">NULL</span>  | <span class="keyword">Sleep</span>   |  <span class="number">113</span> |          | <span class="literal">NULL</span>             |</span><br><span class="line">|  <span class="number">6</span> | root | <span class="number">192.168</span><span class="number">.18</span><span class="number">.1</span>:<span class="number">59228</span> | <span class="literal">NULL</span>  | <span class="keyword">Sleep</span>   |  <span class="number">113</span> |          | <span class="literal">NULL</span>             |</span><br><span class="line">|  <span class="number">7</span> | root | <span class="number">192.168</span><span class="number">.18</span><span class="number">.1</span>:<span class="number">59230</span> | <span class="literal">NULL</span>  | <span class="keyword">Sleep</span>   |  <span class="number">107</span> |          | <span class="literal">NULL</span>             |</span><br><span class="line">+<span class="comment">----+------+--------------------+-------+---------+------+----------+------------------+</span></span><br><span class="line"><span class="number">4</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"><span class="comment">--杀死进程</span></span><br><span class="line"><span class="keyword">kill</span> <span class="keyword">id</span></span><br></pre></td></tr></table></figure><h2 id="三、字段类型"><a href="#三、字段类型" class="headerlink" title="三、字段类型"></a>三、字段类型</h2><table><thead><tr><th>数据类型</th><th>字节长度</th><th>范围或用法</th></tr></thead><tbody><tr><td>Bit</td><td>1</td><td>无符号[0,255]，有符号[-128,127]，天缘博客备注：BIT和BOOL布尔型都占用1字节</td></tr><tr><td>TinyInt</td><td>1</td><td>整数[0,255]</td></tr><tr><td>SmallInt</td><td>2</td><td>无符号[0,65535]，有符号[-32768,32767]</td></tr><tr><td>MediumInt</td><td>3</td><td>无符号[0,2^24-1]，有符号[-2^23,2^23-1]]</td></tr><tr><td>Int</td><td>4</td><td>无符号[0,2^32-1]，有符号[-2^31,2^31-1]</td></tr><tr><td>BigInt</td><td>8</td><td>无符号[0,2^64-1]，有符号[-2^63 ,2^63 -1]</td></tr><tr><td>Float(M,D)</td><td>4</td><td>单精度浮点数。天缘博客提醒这里的D是精度，如果D&lt;=24则为默认的FLOAT，如果D&gt;24则会自动被转换为DOUBLE型。</td></tr><tr><td>Double(M,D)</td><td>8</td><td>双精度浮点。</td></tr><tr><td>Decimal(M,D)</td><td>M+1或M+2</td><td>未打包的浮点数，用法类似于FLOAT和DOUBLE，天缘博客提醒您如果在ASP中使用到Decimal数据类型，直接从数据库读出来的Decimal可能需要先转换成Float或Double类型后再进行运算。</td></tr><tr><td>Date</td><td>3</td><td>以YYYY-MM-DD的格式显示，比如：2009-07-19</td></tr><tr><td>Date Time</td><td>8</td><td>以YYYY-MM-DD HH:MM:SS的格式显示，比如：2009-07-19 11：22：30</td></tr><tr><td>TimeStamp</td><td>4</td><td>以YYYY-MM-DD的格式显示，比如：2009-07-19</td></tr><tr><td>Time</td><td>3</td><td>以HH:MM:SS的格式显示。比如：11：22：30</td></tr><tr><td>Year</td><td>1</td><td>以YYYY的格式显示。比如：2009</td></tr><tr><td>Char(M)</td><td>M</td><td>定长字符串。</td></tr><tr><td>VarChar(M)</td><td>M</td><td>变长字符串，要求M&lt;=255</td></tr><tr><td>Binary(M)</td><td>M</td><td>类似Char的二进制存储，特点是插入定长不足补0</td></tr><tr><td>VarBinary(M)</td><td>M</td><td>类似VarChar的变长二进制存储，特点是定长不补0</td></tr><tr><td>Tiny Text</td><td>Max:255</td><td>大小写不敏感</td></tr><tr><td>Text</td><td>Max:64K</td><td>大小写不敏感</td></tr><tr><td>Medium Text</td><td>Max:16M</td><td>大小写不敏感</td></tr><tr><td>Long Text</td><td>Max:4G</td><td>大小写不敏感</td></tr><tr><td>TinyBlob</td><td>Max:255</td><td>大小写敏感</td></tr><tr><td>Blob</td><td>Max:64K</td><td>大小写敏感</td></tr><tr><td>MediumBlob</td><td>Max:16M</td><td>大小写敏感</td></tr><tr><td>LongBlob</td><td>Max:4G</td><td>大小写敏感</td></tr><tr><td>Enum</td><td>1或2</td><td>最大可达65535个不同的枚举值</td></tr><tr><td>Set</td><td>可达8</td><td>最大可达64个不同的值</td></tr><tr><td>Geometry</td><td></td><td></td></tr><tr><td>Point</td><td></td><td></td></tr><tr><td>LineString</td><td></td><td></td></tr><tr><td>Polygon</td><td></td><td></td></tr><tr><td>MultiPoint</td><td></td><td></td></tr><tr><td>MultiLineString</td><td></td><td></td></tr><tr><td>MultiPolygon</td><td></td><td></td></tr><tr><td>GeometryCollection</td><td></td><td></td></tr></tbody></table><p>timestamp 和datetime的区别：<a href="https://segmentfault.com/a/1190000017393602?utm_source=tag-newest" target="_blank" rel="noopener">https://segmentfault.com/a/1190000017393602?utm_source=tag-newest</a></p><h2 id="四、sql"><a href="#四、sql" class="headerlink" title="四、sql"></a>四、sql</h2><h3 id="sql类型"><a href="#sql类型" class="headerlink" title="sql类型"></a>sql类型</h3><ul><li>ddl：数据定义语言 ,create drop …</li><li>dml: 数据操作语言 ,select insert update delete …</li><li>dcl : 数据控制语言，grant..</li></ul><h3 id="建表规范"><a href="#建表规范" class="headerlink" title="建表规范"></a>建表规范</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_a(</span><br><span class="line"><span class="comment">--第一列必须是id自增长</span></span><br><span class="line"><span class="keyword">id</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">not</span> <span class="literal">null</span> auto_increment primary <span class="keyword">key</span> ,</span><br><span class="line"></span><br><span class="line"><span class="keyword">name</span> <span class="built_in">varchar</span>(<span class="number">255</span>),</span><br><span class="line">age <span class="built_in">int</span>(<span class="number">3</span>),</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">create_user <span class="built_in">varchar</span>(<span class="number">255</span>),</span><br><span class="line">create_time <span class="built_in">timestamp</span> <span class="keyword">not</span> <span class="literal">null</span> <span class="keyword">default</span> <span class="keyword">current_timestamp</span>,</span><br><span class="line">update_user <span class="built_in">varchar</span>(<span class="number">255</span>),</span><br><span class="line">update_time <span class="built_in">timestamp</span> <span class="keyword">not</span> <span class="literal">null</span> <span class="keyword">default</span> <span class="keyword">current_timestamp</span> <span class="keyword">on</span> <span class="keyword">update</span> <span class="keyword">current_timestamp</span></span><br><span class="line">) <span class="keyword">default</span> <span class="keyword">CHARSET</span>=utf8;</span><br></pre></td></tr></table></figure><h3 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> <span class="keyword">user</span>(</span><br><span class="line"><span class="keyword">id</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">not</span> <span class="literal">null</span> primary <span class="keyword">key</span> auto_increment <span class="keyword">comment</span> <span class="string">"无意义主键"</span>,</span><br><span class="line"></span><br><span class="line"><span class="keyword">name</span> <span class="built_in">varchar</span>(<span class="number">255</span>) <span class="keyword">comment</span> <span class="string">"姓名"</span> ,</span><br><span class="line">age  <span class="built_in">int</span>(<span class="number">3</span>) <span class="keyword">comment</span> <span class="string">"年龄"</span>,</span><br><span class="line">sex <span class="built_in">int</span>(<span class="number">1</span>)  <span class="keyword">comment</span> <span class="string">"性别  0代表男  1代表女"</span></span><br><span class="line">)<span class="keyword">default</span> <span class="keyword">charset</span>=utf8 <span class="keyword">comment</span> <span class="string">"用户信息表"</span>;</span><br></pre></td></tr></table></figure><h3 id="union-amp-amp-union-all"><a href="#union-amp-amp-union-all" class="headerlink" title="union &amp;&amp; union all"></a>union &amp;&amp; union all</h3><blockquote><p>union会去重，union all不会去重</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--创建a表</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> a(</span><br><span class="line"><span class="keyword">id</span> <span class="built_in">int</span>(<span class="number">11</span>) ,</span><br><span class="line"><span class="keyword">name</span> <span class="built_in">varchar</span>(<span class="number">255</span>)</span><br><span class="line">)<span class="keyword">default</span> <span class="keyword">charset</span>=utf8;</span><br><span class="line"><span class="comment">--创建c表</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> c(</span><br><span class="line"><span class="keyword">id</span> <span class="built_in">int</span>(<span class="number">11</span>) ,</span><br><span class="line"><span class="keyword">name</span> <span class="built_in">varchar</span>(<span class="number">255</span>)</span><br><span class="line">)<span class="keyword">default</span> <span class="keyword">charset</span>=utf8;</span><br><span class="line"></span><br><span class="line"><span class="comment">--使用union all</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> a</span><br><span class="line"><span class="keyword">union</span> <span class="keyword">all</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> c;</span><br><span class="line"><span class="comment">--result</span></span><br><span class="line">1张三</span><br><span class="line">2李四</span><br><span class="line">1张三</span><br><span class="line">2李四</span><br><span class="line">3王五</span><br><span class="line"></span><br><span class="line"><span class="comment">--使用union</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> a</span><br><span class="line"><span class="keyword">union</span> </span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> c;</span><br><span class="line"><span class="comment">--result</span></span><br><span class="line">1张三</span><br><span class="line">2李四</span><br><span class="line">3王五</span><br></pre></td></tr></table></figure><h3 id="ifnull"><a href="#ifnull" class="headerlink" title="ifnull"></a>ifnull</h3><p>mysql中使用ifnull来判断，而hive中使用nvl来判断</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--创建表</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> b(</span><br><span class="line"><span class="keyword">id</span> <span class="built_in">int</span>(<span class="number">11</span>) ,</span><br><span class="line"><span class="keyword">name</span> <span class="built_in">varchar</span>(<span class="number">255</span>),</span><br><span class="line">age <span class="built_in">int</span>(<span class="number">3</span>)</span><br><span class="line">);</span><br><span class="line"><span class="comment">-- 插入数据</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> b <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">"张三"</span>,<span class="number">52</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> b <span class="keyword">values</span>(<span class="number">2</span>,<span class="string">"李四"</span>,<span class="number">45</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> b <span class="keyword">values</span>(<span class="number">3</span>,<span class="string">"王五"</span>,<span class="number">33</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> b(<span class="keyword">id</span>,<span class="keyword">name</span> ) <span class="keyword">values</span>(<span class="number">4</span>,<span class="string">"赵柳"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> b;</span><br><span class="line">1张三52</span><br><span class="line">2李四45</span><br><span class="line">3王五33</span><br><span class="line">4赵柳null</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">id</span> ,<span class="keyword">name</span> ,<span class="keyword">ifnull</span>(age,<span class="number">0</span>) <span class="keyword">from</span> b;</span><br><span class="line">1张三52</span><br><span class="line">2李四45</span><br><span class="line">3王五33</span><br><span class="line">4赵柳0</span><br></pre></td></tr></table></figure><h2 id="五、join"><a href="#五、join" class="headerlink" title="五、join"></a>五、join</h2> <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建表</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> t_blog(</span><br><span class="line">        <span class="keyword">id</span> <span class="built_in">INT</span> PRIMARY <span class="keyword">KEY</span> AUTO_INCREMENT,</span><br><span class="line">        title <span class="built_in">VARCHAR</span>(<span class="number">50</span>),</span><br><span class="line">        typeId <span class="built_in">INT</span></span><br><span class="line">    );</span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> t_blog;</span><br><span class="line">    +<span class="comment">----+-------+--------+</span></span><br><span class="line">    | id | title | typeId |</span><br><span class="line">    +<span class="comment">----+-------+--------+</span></span><br><span class="line">    |  1 | aaa   |      1 |</span><br><span class="line">    |  2 | bbb   |      2 |</span><br><span class="line">    |  3 | ccc   |      3 |</span><br><span class="line">    |  4 | ddd   |      4 |</span><br><span class="line">    |  5 | eee   |      4 |</span><br><span class="line">    |  6 | fff   |      3 |</span><br><span class="line">    |  7 | ggg   |      2 |</span><br><span class="line">    |  8 | hhh   |   NULL |</span><br><span class="line">    |  9 | iii   |   NULL |</span><br><span class="line">    | 10 | jjj   |   NULL |</span><br><span class="line">    +<span class="comment">----+-------+--------+</span></span><br><span class="line">    <span class="comment">-- 博客的类别</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> t_type(</span><br><span class="line">        <span class="keyword">id</span> <span class="built_in">INT</span> PRIMARY <span class="keyword">KEY</span> AUTO_INCREMENT,</span><br><span class="line">        <span class="keyword">name</span> <span class="built_in">VARCHAR</span>(<span class="number">20</span>)</span><br><span class="line">    );</span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> t_type;</span><br><span class="line">    +<span class="comment">----+------------+</span></span><br><span class="line">    | id | name       |</span><br><span class="line">    +<span class="comment">----+------------+</span></span><br><span class="line">    |  1 | C++        |</span><br><span class="line">    |  2 | C          |</span><br><span class="line">    |  3 | Java       |</span><br><span class="line">    |  4 | C<span class="comment">#         |</span></span><br><span class="line">    |  5 | python     |</span><br><span class="line">    +<span class="comment">----+------------+</span></span><br></pre></td></tr></table></figure><h3 id="笛卡尔积-cross-join"><a href="#笛卡尔积-cross-join" class="headerlink" title="笛卡尔积 cross join"></a>笛卡尔积 cross join</h3><blockquote><p>笛卡尔积：将a表的每一条记录都与b表的每一条数据进行关联，假如a表十条数据，b表五条数据 ，结果就是五十条数据。</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--笛卡尔积join</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> t_blog <span class="keyword">join</span> t_type ;</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> t_blog  <span class="keyword">cross</span> <span class="keyword">join</span> t_type ;</span><br><span class="line">+<span class="comment">----+-------+--------+----+--------+</span></span><br><span class="line">| id | title | typeId | id | name   |</span><br><span class="line">+<span class="comment">----+-------+--------+----+--------+</span></span><br><span class="line">|  1 | aaa   |      1 |  1 | c++    |</span><br><span class="line">|  1 | aaa   |      1 |  2 | c      |</span><br><span class="line">|  1 | aaa   |      1 |  3 | java   |</span><br><span class="line">|  1 | aaa   |      1 |  4 | c<span class="comment">#     |</span></span><br><span class="line">|  1 | aaa   |      1 |  5 | python |</span><br><span class="line">|  2 | bbb   |      2 |  1 | c++    |</span><br><span class="line">|  2 | bbb   |      2 |  2 | c      |</span><br><span class="line">|  2 | bbb   |      2 |  3 | java   |</span><br><span class="line">|  2 | bbb   |      2 |  4 | c<span class="comment">#     |</span></span><br><span class="line">|  2 | bbb   |      2 |  5 | python |</span><br><span class="line">|  3 | ccc   |      3 |  1 | c++    |</span><br><span class="line">|  3 | ccc   |      3 |  2 | c      |</span><br><span class="line">|  3 | ccc   |      3 |  3 | java   |</span><br><span class="line">|  3 | ccc   |      3 |  4 | c<span class="comment">#     |</span></span><br><span class="line">|  3 | ccc   |      3 |  5 | python |</span><br><span class="line">|  4 | ddd   |      4 |  1 | c++    |</span><br><span class="line">|  4 | ddd   |      4 |  2 | c      |</span><br><span class="line">|  4 | ddd   |      4 |  3 | java   |</span><br><span class="line">|  4 | ddd   |      4 |  4 | c<span class="comment">#     |</span></span><br><span class="line">|  4 | ddd   |      4 |  5 | python |</span><br><span class="line">|  5 | eee   |      4 |  1 | c++    |</span><br><span class="line">|  5 | eee   |      4 |  2 | c      |</span><br><span class="line">|  5 | eee   |      4 |  3 | java   |</span><br><span class="line">|  5 | eee   |      4 |  4 | c<span class="comment">#     |</span></span><br><span class="line">|  5 | eee   |      4 |  5 | python |</span><br><span class="line">|  6 | fff   |      3 |  1 | c++    |</span><br><span class="line">|  6 | fff   |      3 |  2 | c      |</span><br><span class="line">|  6 | fff   |      3 |  3 | java   |</span><br><span class="line">|  6 | fff   |      3 |  4 | c<span class="comment">#     |</span></span><br><span class="line">|  6 | fff   |      3 |  5 | python |</span><br><span class="line">|  7 | ggg   |      2 |  1 | c++    |</span><br><span class="line">|  7 | ggg   |      2 |  2 | c      |</span><br><span class="line">|  7 | ggg   |      2 |  3 | java   |</span><br><span class="line">|  7 | ggg   |      2 |  4 | c<span class="comment">#     |</span></span><br><span class="line">|  7 | ggg   |      2 |  5 | python |</span><br><span class="line">|  8 | hhh   |   NULL |  1 | c++    |</span><br><span class="line">|  8 | hhh   |   NULL |  2 | c      |</span><br><span class="line">|  8 | hhh   |   NULL |  3 | java   |</span><br><span class="line">|  8 | hhh   |   NULL |  4 | c<span class="comment">#     |</span></span><br><span class="line">|  8 | hhh   |   NULL |  5 | python |</span><br><span class="line">|  9 | iii   |   NULL |  1 | c++    |</span><br><span class="line">|  9 | iii   |   NULL |  2 | c      |</span><br><span class="line">|  9 | iii   |   NULL |  3 | java   |</span><br><span class="line">|  9 | iii   |   NULL |  4 | c<span class="comment">#     |</span></span><br><span class="line">|  9 | iii   |   NULL |  5 | python |</span><br><span class="line">| 10 | jjj   |   NULL |  1 | c++    |</span><br><span class="line">| 10 | jjj   |   NULL |  2 | c      |</span><br><span class="line">| 10 | jjj   |   NULL |  3 | java   |</span><br><span class="line">| 10 | jjj   |   NULL |  4 | c<span class="comment">#     |</span></span><br><span class="line">| 10 | jjj   |   NULL |  5 | python |</span><br><span class="line">+<span class="comment">----+-------+--------+----+--------+</span></span><br><span class="line">50 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure><h3 id="内连接-inner-join"><a href="#内连接-inner-join" class="headerlink" title="内连接 inner join"></a>内连接 inner join</h3><blockquote><p>内连接：求两个表的交集，从笛卡尔积的角度讲就是从笛卡尔积中挑选on子句中条件成立的记录，如果没有on条件，那么就等同于笛卡尔积</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from t_blog inner join t_type on t_blog.typeId = t_type.id ; </span><br><span class="line">+<span class="comment">----+-------+--------+----+------+</span></span><br><span class="line">| id | title | typeId | id | name |</span><br><span class="line">+<span class="comment">----+-------+--------+----+------+</span></span><br><span class="line">|  1 | aaa   |      1 |  1 | c++  |</span><br><span class="line">|  2 | bbb   |      2 |  2 | c    |</span><br><span class="line">|  3 | ccc   |      3 |  3 | java |</span><br><span class="line">|  4 | ddd   |      4 |  4 | c<span class="comment">#   |</span></span><br><span class="line">|  5 | eee   |      4 |  4 | c<span class="comment">#   |</span></span><br><span class="line">|  6 | fff   |      3 |  3 | java |</span><br><span class="line">|  7 | ggg   |      2 |  2 | c    |</span><br><span class="line">+<span class="comment">----+-------+--------+----+------+</span></span><br><span class="line">7 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure><h3 id="左连接-left-join"><a href="#左连接-left-join" class="headerlink" title="左连接 left  join"></a>左连接 left  join</h3><blockquote><p>左连接：左表的数据要全部出现在结果中</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from t_blog left join t_type on t_blog.typeId = t_type.id ;      </span><br><span class="line">+<span class="comment">----+-------+--------+------+------+</span></span><br><span class="line">| id | title | typeId | id   | name |</span><br><span class="line">+<span class="comment">----+-------+--------+------+------+</span></span><br><span class="line">|  1 | aaa   |      1 |    1 | c++  |</span><br><span class="line">|  2 | bbb   |      2 |    2 | c    |</span><br><span class="line">|  7 | ggg   |      2 |    2 | c    |</span><br><span class="line">|  3 | ccc   |      3 |    3 | java |</span><br><span class="line">|  6 | fff   |      3 |    3 | java |</span><br><span class="line">|  4 | ddd   |      4 |    4 | c<span class="comment">#   |</span></span><br><span class="line">|  5 | eee   |      4 |    4 | c<span class="comment">#   |</span></span><br><span class="line">|  8 | hhh   |   NULL | NULL | NULL |</span><br><span class="line">|  9 | iii   |   NULL | NULL | NULL |</span><br><span class="line">| 10 | jjj   |   NULL | NULL | NULL |</span><br><span class="line">+<span class="comment">----+-------+--------+------+------+</span></span><br><span class="line">10 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure><h3 id="右连接-right-join"><a href="#右连接-right-join" class="headerlink" title="右连接 right join"></a>右连接 right join</h3><blockquote><p>右连接：和左连接类似 ，不再赘述</p></blockquote><h3 id="外连接-outer-join"><a href="#外连接-outer-join" class="headerlink" title="外连接 outer join"></a>外连接 outer join</h3><blockquote><p>外连接：求两个集合的并集，从笛卡尔积的角度来讲就是挑出on子句中成立的记录，然后加上左表中剩余的记录，最后加上右表中剩余的记录。但是mysql不支持outer join ，但是可以使用union操作实现</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from t_blog left join t_type on t_blog.typeId = t_type.id</span><br><span class="line">    -&gt; union </span><br><span class="line">    -&gt; select * from t_blog right join t_type on t_blog.typeId = t_type.id;   </span><br><span class="line">+<span class="comment">------+-------+--------+------+--------+</span></span><br><span class="line">| id   | title | typeId | id   | name   |</span><br><span class="line">+<span class="comment">------+-------+--------+------+--------+</span></span><br><span class="line">|    1 | aaa   |      1 |    1 | c++    |</span><br><span class="line">|    2 | bbb   |      2 |    2 | c      |</span><br><span class="line">|    7 | ggg   |      2 |    2 | c      |</span><br><span class="line">|    3 | ccc   |      3 |    3 | java   |</span><br><span class="line">|    6 | fff   |      3 |    3 | java   |</span><br><span class="line">|    4 | ddd   |      4 |    4 | c<span class="comment">#     |</span></span><br><span class="line">|    5 | eee   |      4 |    4 | c<span class="comment">#     |</span></span><br><span class="line">|    8 | hhh   |   NULL | NULL | NULL   |</span><br><span class="line">|    9 | iii   |   NULL | NULL | NULL   |</span><br><span class="line">|   10 | jjj   |   NULL | NULL | NULL   |</span><br><span class="line">| NULL | NULL  |   NULL |    5 | python |</span><br><span class="line">+<span class="comment">------+-------+--------+------+--------+</span></span><br><span class="line">11 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure><h3 id="自然连接-natural-join"><a href="#自然连接-natural-join" class="headerlink" title="自然连接 natural join"></a>自然连接 natural join</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from t_blog natural join t_type ;</span><br><span class="line">+<span class="comment">----+-------+--------+--------+</span></span><br><span class="line">| id | title | typeId | name   |</span><br><span class="line">+<span class="comment">----+-------+--------+--------+</span></span><br><span class="line">|  1 | aaa   |      1 | c++    |</span><br><span class="line">|  2 | bbb   |      2 | c      |</span><br><span class="line">|  3 | ccc   |      3 | java   |</span><br><span class="line">|  4 | ddd   |      4 | c<span class="comment">#     |</span></span><br><span class="line">|  5 | eee   |      4 | python |</span><br><span class="line">+<span class="comment">----+-------+--------+--------+</span></span><br><span class="line">5 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure><h2 id="六、topN"><a href="#六、topN" class="headerlink" title="六、topN"></a>六、topN</h2><blockquote><p>hive中可以使用窗口函数快速进行topn的统计，但是mysql中没有，因此mysql统计topn相对麻烦</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--数据</span></span><br><span class="line">mysql&gt; select * from emp;</span><br><span class="line">+<span class="comment">-------+--------+-----------+------+---------------------+---------+---------+--------+</span></span><br><span class="line">| empno | ename  | job       | mgr  | hiredate            | sal     | comm    | deptno |</span><br><span class="line">+<span class="comment">-------+--------+-----------+------+---------------------+---------+---------+--------+</span></span><br><span class="line">|  7369 | SMITH  | CLERK     | 7902 | 1980-12-17 00:00:00 |  800.00 |    NULL |     20 |</span><br><span class="line">|  7499 | ALLEN  | SALESMAN  | 7698 | 1981-02-20 00:00:00 | 1600.00 |  300.00 |     30 |</span><br><span class="line">|  7521 | WARD   | SALESMAN  | 7698 | 1981-02-22 00:00:00 | 1250.00 |  500.00 |     30 |</span><br><span class="line">|  7566 | JONES  | MANAGER   | 7839 | 1981-04-02 00:00:00 | 2975.00 |    NULL |     20 |</span><br><span class="line">|  7654 | MARTIN | SALESMAN  | 7698 | 1981-09-28 00:00:00 | 1250.00 | 1400.00 |     30 |</span><br><span class="line">|  7698 | BLAKE  | MANAGER   | 7839 | 1981-05-01 00:00:00 | 2850.00 |    NULL |     30 |</span><br><span class="line">|  7782 | CLARK  | MANAGER   | 7839 | 1981-06-09 00:00:00 | 2450.00 |    NULL |     10 |</span><br><span class="line">|  7788 | SCOTT  | ANALYST   | 7566 | 1982-12-09 00:00:00 | 3000.00 |    NULL |     20 |</span><br><span class="line">|  7839 | KING   | PRESIDENT | NULL | 1981-11-17 00:00:00 | 5000.00 |    NULL |     10 |</span><br><span class="line">|  7844 | TURNER | SALESMAN  | 7698 | 1981-09-08 00:00:00 | 1500.00 |    0.00 |     30 |</span><br><span class="line">|  7876 | ADAMS  | CLERK     | 7788 | 1983-01-12 00:00:00 | 1100.00 |    NULL |     20 |</span><br><span class="line">|  7900 | JAMES  | CLERK     | 7698 | 1981-12-03 00:00:00 |  950.00 |    NULL |     30 |</span><br><span class="line">|  7902 | FORD   | ANALYST   | 7566 | 1981-12-03 00:00:00 | 3000.00 |    NULL |     20 |</span><br><span class="line">|  7934 | MILLER | CLERK     | 7782 | 1982-01-23 00:00:00 | 1300.00 |    NULL |     10 |</span><br><span class="line">+<span class="comment">-------+--------+-----------+------+---------------------+---------+---------+--------+</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--需求：统计每个部门里面薪资最高的前两位</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--创建视图</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">view</span> sal </span><br><span class="line"><span class="keyword">as</span></span><br><span class="line"><span class="keyword">select</span>  </span><br><span class="line">deptno ,job,</span><br><span class="line"><span class="keyword">sum</span>(sal+<span class="keyword">ifnull</span>(comm ,<span class="number">0</span>)) sal</span><br><span class="line"><span class="keyword">from</span> emp</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> deptno ,job ;</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from sal;</span><br><span class="line">+<span class="comment">--------+-----------+---------+</span></span><br><span class="line">| deptno | job       | sal     |</span><br><span class="line">+<span class="comment">--------+-----------+---------+</span></span><br><span class="line">|     10 | CLERK     | 1300.00 |</span><br><span class="line">|     10 | MANAGER   | 2450.00 |</span><br><span class="line">|     10 | PRESIDENT | 5000.00 |</span><br><span class="line">|     20 | ANALYST   | 6000.00 |</span><br><span class="line">|     20 | CLERK     | 1900.00 |</span><br><span class="line">|     20 | MANAGER   | 2975.00 |</span><br><span class="line">|     30 | CLERK     |  950.00 |</span><br><span class="line">|     30 | MANAGER   | 2850.00 |</span><br><span class="line">|     30 | SALESMAN  | 7800.00 |</span><br><span class="line">+<span class="comment">--------+-----------+---------+</span></span><br><span class="line">9 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"><span class="comment">--最终查询结果</span></span><br><span class="line">mysql&gt; <span class="keyword">select</span> a.* <span class="keyword">from</span> sal a</span><br><span class="line">    -&gt; <span class="keyword">where</span> (</span><br><span class="line">    -&gt; <span class="keyword">select</span> <span class="keyword">count</span>(*) <span class="keyword">from</span> sal b <span class="keyword">where</span> a.deptno=b.deptno <span class="keyword">and</span> a.sal&lt;b.sal)&lt;<span class="number">2</span></span><br><span class="line">    -&gt;  <span class="keyword">order</span> <span class="keyword">by</span> a.deptno ,sal <span class="keyword">desc</span>;</span><br><span class="line">+<span class="comment">--------+-----------+---------+</span></span><br><span class="line">| deptno | job       | sal     |</span><br><span class="line">+<span class="comment">--------+-----------+---------+</span></span><br><span class="line">|     10 | PRESIDENT | 5000.00 |</span><br><span class="line">|     10 | MANAGER   | 2450.00 |</span><br><span class="line">|     20 | ANALYST   | 6000.00 |</span><br><span class="line">|     20 | MANAGER   | 2975.00 |</span><br><span class="line">|     30 | SALESMAN  | 7800.00 |</span><br><span class="line">|     30 | MANAGER   | 2850.00 |</span><br><span class="line">+<span class="comment">--------+-----------+---------+</span></span><br><span class="line">6 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure><h2 id="七、MySQL的执行顺序"><a href="#七、MySQL的执行顺序" class="headerlink" title="七、MySQL的执行顺序"></a>七、MySQL的执行顺序</h2><h3 id="mysql执行sql的顺序从-From-开始，以下是执行的顺序流程"><a href="#mysql执行sql的顺序从-From-开始，以下是执行的顺序流程" class="headerlink" title="mysql执行sql的顺序从 From 开始，以下是执行的顺序流程"></a>mysql执行sql的顺序从 From 开始，以下是执行的顺序流程</h3><ol><li><code>FROM</code>  table1 left join table2 on 将table1和table2中的数据产生笛卡尔积，生成Temp1</li><li><code>JOIN</code>table2  所以先是确定表，再确定关联条件</li><li><code>ON</code> table1.column = table2.columu 确定表的绑定条件 由Temp1产生中间表Temp2</li><li><code>WHERE</code>  对中间表Temp2产生的结果进行过滤  产生中间表Temp3</li><li><code>GROUP BY</code> 对中间表Temp3进行分组，产生中间表Temp4</li><li><code>HAVING</code>  对分组后的记录进行聚合 产生中间表Temp5</li><li><code>SELECT</code>  对中间表Temp5进行列筛选，产生中间表 Temp6</li><li><code>DISTINCT</code> 对中间表 Temp6进行去重，产生中间表 Temp7</li><li><code>ORDER BY</code> 对Temp7中的数据进行排序，产生中间表Temp8</li><li><code>LIMIT</code> 对中间表Temp8进行分页，产生中间表Temp9</li></ol><h2 id="八、MySQL事务"><a href="#八、MySQL事务" class="headerlink" title="八、MySQL事务"></a>八、MySQL事务</h2><h3 id="什么是事务"><a href="#什么是事务" class="headerlink" title="什么是事务"></a>什么是事务</h3><blockquote><p>事务是应用程序中一系列严密的操作，所有操作必须成功完成，否则在每个操作中所做的更改都会被撤销，也就是事务具有原子性，一个事务中的一系列操作要么全部成功，要么全失败</p></blockquote><h3 id="事务的目的"><a href="#事务的目的" class="headerlink" title="事务的目的"></a>事务的目的</h3><ul><li>成功情况下，能将数据从一种状态变为另一种状态，并能够持久化</li><li>异常情况下，能将数据恢复到正常状态，要能保证一致性，包含数据的一致性和约束的一致性</li><li>并发情况下，并发的操作之间不能产生相互影响</li></ul><h3 id="事务的ACID"><a href="#事务的ACID" class="headerlink" title="事务的ACID"></a>事务的ACID</h3><ul><li>原子性(Atomicity)：事务是数据库的逻辑工作单元，事务中包含的操作要么全部成功，要么全部失败</li><li>一致性(Consistency)：一致性是指在事务开始之前和事务结束之后，数据库的完整性约束没有被破坏。这是说数据库事务不能破坏关系数据的完整性以及业务逻辑上的一致性，例如：a给b转账，不论转账的事务操作是否成功，其两者的存款总额不变(这是业务逻辑的一致性)</li><li>隔离性(Isolation)：一个事务的执行不受其他事务干扰。即一个事务的内部操作及使用的数据对其他并发事务是隔离的，并发执行的各个事务之间不能互相干扰。</li><li>持久性(Durability)：事务一旦提交，它对数据库中的数据的改变应该就是永久性的。接下来其他的操作或故障不应该对其执行结果有任何影响</li></ul><h3 id="脏读、不可重复读、幻读"><a href="#脏读、不可重复读、幻读" class="headerlink" title="脏读、不可重复读、幻读"></a>脏读、不可重复读、幻读</h3><blockquote><p>脏读（读取未提交数据）：a事务读取b事务尚未提交的数据，此时如果b事务发生错误进行了回滚，那么a事务读取到的数据就是脏数据。</p></blockquote><table><thead><tr><th>时间顺序</th><th>转账事务</th><th>取款事务</th></tr></thead><tbody><tr><td>1</td><td></td><td>开始事务</td></tr><tr><td>2</td><td>开始事务</td><td></td></tr><tr><td>3</td><td></td><td>查询账号余额为2000元</td></tr><tr><td>4</td><td></td><td>取款1000元，余额被改为1000元</td></tr><tr><td>5</td><td>查询账户余额为1000元(产生脏读)</td><td></td></tr><tr><td>6</td><td></td><td>取款操作发生未知错误，事务回滚，余额变为2000元</td></tr><tr><td>7</td><td>转入2000元，余额被更改为3000元(脏读的1000+2000)</td><td></td></tr><tr><td>8</td><td>提交事务</td><td></td></tr><tr><td>备注</td><td>按照正确逻辑，此时账户余额应该为4000元</td><td></td></tr></tbody></table><blockquote><p>不可重复读（前后多次读取，数据内容不一致）：事务a在执行读取操作，由于整个事务a比较大，前后读取同一条数据需要经历很长的时间。而在事务a第一次读取数据，比如此时读取了小明的年龄为20，事务b执行更改操作，将小明的年龄更改为30，此时事务a第二次读取到小明的年龄时，返现年龄时30岁，和之前的数据不一样了，也就是数据不重复了，系统不可以读取到重复的数据，成为不可重复读</p></blockquote><table><thead><tr><th>时间顺序</th><th align="left">事务a</th><th>事务b</th></tr></thead><tbody><tr><td>1</td><td align="left">开始事务</td><td></td></tr><tr><td>2</td><td align="left">第一次查询，小明年龄为20岁</td><td></td></tr><tr><td>3</td><td align="left"></td><td>开始事务</td></tr><tr><td>4</td><td align="left">其他操作</td><td></td></tr><tr><td>5</td><td align="left"></td><td>更改小明的年龄为30岁</td></tr><tr><td>6</td><td align="left"></td><td>提交事务</td></tr><tr><td>7</td><td align="left">第二次查询，小明年龄为30岁</td><td></td></tr><tr><td>备注</td><td align="left">按照正确逻辑，事务a前后两次读取得到的数据应该一致</td><td></td></tr></tbody></table><blockquote><p>幻读（前后多次读取，数据总量不一致）：事务a在执行读取操作，需要两次统计数据的总量，前一次查询数据总量后，此时事务b执行了新增数据的操作并提交后，此时事务a读取的数据总量和之前统计的不一致，就像产生了幻觉一样，平白无故多了几条数据，称为幻读。</p></blockquote><table><thead><tr><th>时间顺序</th><th>事务a</th><th>事务b</th></tr></thead><tbody><tr><td>1</td><td>开始事务</td><td></td></tr><tr><td>2</td><td>第一次查询，数据总量为100条</td><td></td></tr><tr><td>3</td><td></td><td>开始事务</td></tr><tr><td>4</td><td>其他操作</td><td></td></tr><tr><td>5</td><td></td><td>新增100条数据</td></tr><tr><td>6</td><td></td><td>提交事务</td></tr><tr><td>7</td><td>第二次查询，数据总量为200条</td><td></td></tr><tr><td>备注</td><td>按照正确逻辑，事务a前后两次读取到的数据总量应该一致</td><td></td></tr></tbody></table><h3 id="MySQL的四种隔离级别"><a href="#MySQL的四种隔离级别" class="headerlink" title="MySQL的四种隔离级别"></a>MySQL的四种隔离级别</h3><blockquote><p>SQL标准定义了四类隔离级别，包括了一些具体规则，用来限定事务内外的哪些改变是可见的，哪些改变是不可见的。低级别的隔离级别一般支持更高的并发处理，并拥有更低的系统开销</p></blockquote><h4 id="Read-Uncommitted-读未提交内容"><a href="#Read-Uncommitted-读未提交内容" class="headerlink" title="Read Uncommitted(读未提交内容)"></a>Read Uncommitted(读未提交内容)</h4><p>在该隔离级别，所有的事务都可以看到其他为未提交事务的执行结果。此隔离级别很少用于实际，因为他的性能不高。读取未提交的数据，也被称为<code>脏读</code></p><h4 id="Read-Committed-读取提交内容"><a href="#Read-Committed-读取提交内容" class="headerlink" title="Read Committed(读取提交内容)"></a>Read Committed(读取提交内容)</h4><p>这是大多数数据库系统默认隔离级别(但不是MySQL默认的)。它满足隔离的简单定义：一个事务只能看到已经提交事务所做的改变，这种隔离级别，也支持所谓的不可重复读，因为同一事务的其他实例在该实例处理期间可能会有新的commit。</p><h4 id="Repeatable-Read-可重读"><a href="#Repeatable-Read-可重读" class="headerlink" title="Repeatable Read(可重读)"></a>Repeatable Read(可重读)</h4><p>这是MySQL的默认事务隔离级别，它确保同一事务的多个实例在并发读取数据时，会看到同样的数据行，不过理论上，这会导致另一个棘手的问题：幻读 。简单的来说，幻读指的是当用户读取某一范围的数据行时，另一个事务又在该范围插入了新行，当用户再次读取的时候，会发现有新的“幻影”行。InnoDB和Falcon存储通过多版本并发控制机制解决了该问题。</p><h4 id="Serializable-可串行化"><a href="#Serializable-可串行化" class="headerlink" title="Serializable(可串行化)"></a>Serializable(可串行化)</h4><p>这是最高的隔离级别，它通过强制事务排序，使之不可能相互冲突，从而解决幻读问题。简言之，它在每个读的数据行上加上共享锁。在这个级别，可能导致大量的超时现象和锁竞争。</p><p>在MySQL中，实现了这四种隔离级别，分别有可能产生问题如下所示：</p><table><thead><tr><th align="left">隔离级别</th><th align="center">脏读</th><th align="center">不可重复读</th><th align="center">幻读</th></tr></thead><tbody><tr><td align="left">Read Uncommitted</td><td align="center">√</td><td align="center">√</td><td align="center">√</td></tr><tr><td align="left">Read committed</td><td align="center">×</td><td align="center">√</td><td align="center">√</td></tr><tr><td align="left">Repeatable read</td><td align="center">×</td><td align="center">×</td><td align="center">√</td></tr><tr><td align="left">Serializable</td><td align="center">×</td><td align="center">×</td><td align="center">×</td></tr></tbody></table>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;一、Linux部署MySQL&quot;&gt;&lt;a href=&quot;#一、Linux部署MySQL&quot; class=&quot;headerlink&quot; title=&quot;一、Linux部署MySQL&quot;&gt;&lt;/a&gt;一、Linux部署MySQL&lt;/h2&gt;&lt;h3 id=&quot;1-解压及创建目录&quot;&gt;&lt;a hre
      
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="http://yoursite.com/2020/04/30/hello-world/"/>
    <id>http://yoursite.com/2020/04/30/hello-world/</id>
    <published>2020-04-30T03:32:45.740Z</published>
    <updated>2020-04-30T03:32:45.740Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.
      
    
    </summary>
    
    
    
  </entry>
  
</feed>
